---
phase: 06.4-dashboard-landing-pages-public-hero-polish-and-citizen-auth-architecture-on-public-portal
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend-public/src/components/landing/HeroSection.tsx
  - frontend-public/src/components/landing/DashboardCTA.tsx
  - frontend-public/src/App.css
  - shared/design-tokens.css
autonomous: true

must_haves:
  truths:
    - "All 5 landing sections have GSAP scroll-triggered entrance animations"
    - "Hero text has pink/rose semi-transparent overlay for readability against skyline"
    - "Hero subtitle and CTA have solid background treatment visible against skyline photograph"
    - "DashboardCTA section has scroll-triggered entrance animation"
    - "All animations respect prefers-reduced-motion"
    - "Feature cards have visible backgrounds with adequate contrast against pink base"
    - "Landing page section text (Problem, Solution, Features) is clearly readable"
  artifacts:
    - path: "frontend-public/src/components/landing/HeroSection.tsx"
      provides: "Hero with readability overlay and entrance animations"
      contains: "hero-text-overlay"
    - path: "frontend-public/src/components/landing/DashboardCTA.tsx"
      provides: "DashboardCTA with scroll-triggered entrance"
      contains: "ScrollTrigger"
    - path: "frontend-public/src/App.css"
      provides: "CSS for hero overlay, subtitle container, CTA container, and fixed feature card visibility"
      contains: "hero-text-overlay"
  key_links:
    - from: "frontend-public/src/components/landing/HeroSection.tsx"
      to: "frontend-public/src/App.css"
      via: "CSS class names for overlay elements"
      pattern: "hero-text-overlay"
---

<objective>
Polish the public landing page with scroll-triggered GSAP animations on all sections, fix hero text readability against the skyline photograph, and fix invisible feature card backgrounds.

Purpose: The landing page currently has animations on some sections (Problem, Solution, Features already have ScrollTrigger) but the DashboardCTA section has none, and the Hero text is difficult to read against the skyline background photograph. Additionally, the Playwright UI audit revealed that feature cards are nearly invisible — their background is `var(--surface-elevated)` which resolves to `rgba(255, 255, 255, 0.08)` (8% white opacity) on the pink `--surface-base: #cd5e81` background, making them blend into the background completely. This plan adds the missing scroll animation, enhances the hero with a pink/rose semi-transparent overlay, adds solid background treatment to the subtitle and CTA button area, and fixes the feature card visibility.

Output: Enhanced landing page with full scroll storytelling, readable hero content, and visible feature cards.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@frontend-public/src/components/landing/HeroSection.tsx
@frontend-public/src/components/landing/ProblemSection.tsx
@frontend-public/src/components/landing/SolutionSection.tsx
@frontend-public/src/components/landing/FeaturesSection.tsx
@frontend-public/src/components/landing/DashboardCTA.tsx
@frontend-public/src/App.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hero readability overlay and solid subtitle/CTA backgrounds</name>
  <files>
    frontend-public/src/components/landing/HeroSection.tsx
    frontend-public/src/App.css
  </files>
  <action>
    **1. Update `frontend-public/src/components/landing/HeroSection.tsx`:**

    Add readability layers to the hero section. The current hero has: skyline-background div, hero-content div with headline + subtitle + CTA button, and hero-gradient-overlay div.

    Changes needed:
    a. Add a new `<div className="hero-text-overlay" />` BETWEEN the skyline-background and hero-content. This is a pink/rose semi-transparent overlay that covers the entire hero, making text readable against the skyline photo.

    b. Wrap the subtitle `<p>` in a `<div className="hero-subtitle-container">` with glassmorphic background treatment. Keep the existing ref on the p element.

    c. Wrap the CTA Link+Button in a `<div className="hero-cta-container">`. Add a ref for this container (`ctaRef`) and include it in the GSAP entrance timeline.

    d. Update the GSAP timeline to animate the CTA container too:
    ```
    .from(ctaRef.current, {
      y: 30, opacity: 0, duration: 0.6, ease: 'power2.out'
    }, '-=0.3')
    ```

    e. Remove the inline `textShadow` style from the h1 (the overlay now handles readability).

    f. In the reduced motion branch, also set ctaRef.current to visible.

    **2. Add CSS to `frontend-public/src/App.css`:**

    Add the following CSS rules (find the hero-section related styles area):

    ```css
    .hero-text-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        180deg,
        rgba(205, 94, 129, 0.3) 0%,
        rgba(163, 72, 102, 0.5) 100%
      );
      z-index: 1;
    }

    .hero-subtitle-container {
      background: rgba(205, 94, 129, 0.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 1rem 1.5rem;
      border-radius: var(--radius-md);
      display: inline-block;
      margin-bottom: 1.5rem;
    }

    .hero-cta-container {
      display: inline-block;
    }
    ```

    Make sure `.hero-content` has `position: relative; z-index: 2;` so it sits above the overlay. If it already has this from existing CSS, no change needed. Check and add if missing.

    The opacity values (0.3 top, 0.5 bottom) are Claude's discretion per user decision — they balance readability vs skyline visibility. The subtitle container at 0.55 opacity with blur creates a frosted glass effect.
  </action>
  <verify>
    Run `cd frontend-public && npx tsc --noEmit` to verify TypeScript compiles.
    Verify HeroSection.tsx contains "hero-text-overlay" and "hero-subtitle-container".
    Verify App.css contains the new overlay CSS classes.
  </verify>
  <done>
    Hero section has pink/rose semi-transparent overlay for text readability. Subtitle has solid glassmorphic background. CTA is animated with GSAP entrance. Text is clearly readable against the skyline photograph.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add scroll-triggered animation to DashboardCTA section</name>
  <files>
    frontend-public/src/components/landing/DashboardCTA.tsx
  </files>
  <action>
    Update `frontend-public/src/components/landing/DashboardCTA.tsx` to add GSAP scroll-triggered entrance animation, matching the pattern used by ProblemSection, SolutionSection, and FeaturesSection.

    Changes:
    1. Add imports: `useRef` from react, `gsap` from gsap, `ScrollTrigger` from gsap/ScrollTrigger, `useGSAP` from @gsap/react, `useReducedMotion` from @shared/hooks/useReducedMotion
    2. Register plugins: `gsap.registerPlugin(ScrollTrigger)`
    3. Create `sectionRef = useRef<HTMLElement>(null)` and attach to the `<section>` element
    4. Add `const reducedMotion = useReducedMotion();`
    5. Add useGSAP animation:
       ```typescript
       useGSAP(() => {
         if (reducedMotion) {
           gsap.set('.dashboard-cta-content', { opacity: 1, y: 0 });
           return;
         }

         // Section fade + slide entrance
         gsap.from(sectionRef.current, {
           opacity: 0,
           y: 60,
           duration: 1,
           ease: 'power3.out',
           scrollTrigger: {
             trigger: sectionRef.current,
             start: 'top 80%',
             toggleActions: 'play none none reverse',
           },
         });
       }, { scope: sectionRef, dependencies: [reducedMotion] });
       ```
    6. Change `<section className=...>` to `<section ref={sectionRef} className=...>`

    This completes the full scroll storytelling: Hero (entrance), Problem (line-by-line reveal), Solution (side-by-side scrub), Features (staggered card reveal), DashboardCTA (fade+slide entrance). All 5 sections now have GSAP scroll-triggered animations per user decision.
  </action>
  <verify>
    Run `cd frontend-public && npx tsc --noEmit` to verify TypeScript compiles.
    Verify DashboardCTA.tsx contains ScrollTrigger import and useGSAP hook.
  </verify>
  <done>
    DashboardCTA section animates on scroll with fade+slide entrance. All 5 landing sections now have scroll-triggered animations. All animations respect prefers-reduced-motion.
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix feature card visibility and section text contrast</name>
  <files>
    shared/design-tokens.css
    frontend-public/src/App.css
  </files>
  <action>
    **Root cause (from Playwright UI audit):** Feature cards use `background: var(--surface-elevated)` which resolves to `rgba(255, 255, 255, 0.08)` — 8% white opacity. On the pink `--surface-base: #cd5e81` background, this is nearly invisible. Combined with GSAP `autoAlpha: 0` initial state, the entire Features section appears as a blank pink block until scroll triggers the animation, and even after animation the cards are barely distinguishable from the background.

    **Changes:**

    1. **Update `shared/design-tokens.css`:**
       Increase `--surface-elevated` from 8% to 15% white opacity so cards are visible across both portals:
       ```css
       --surface-elevated: rgba(255, 255, 255, 0.15);
       ```
       This is a shared token — it affects both frontend-public and frontend-dashboard. At 15% the cards are visible but still glassmorphic.

    2. **Update `frontend-public/src/App.css` — `.feature-card` override:**
       Add a stronger background specifically for the public landing page feature cards, since they sit on the bright pink `--surface-base` and need higher contrast than dashboard cards:
       ```css
       .feature-card {
         background: rgba(255, 255, 255, 0.18);
         border: 1px solid rgba(255, 255, 255, 0.22);
         box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
       }
       ```
       Find the FIRST `.feature-card` block (around line 212) and update its background and border there. The second `.feature-card` block (around line 1197) handles hover transitions — leave it as is.

    3. **Verify section text colors have adequate contrast:**
       - `.problem-text-large` uses `color: var(--text-primary)` → `#f9f7f8` on pink `#cd5e81` — WCAG contrast ratio ~3.2:1. This is borderline for large text (3:1 minimum for AA). Keep as is — it passes AA for large text.
       - `.problem-text-detail` uses `color: var(--text-secondary)` → `#e0d4d8` on pink `#cd5e81` — contrast ratio ~1.8:1. This FAILS even for large text. Add override in App.css:
       ```css
       .problem-text-detail {
         color: var(--text-primary);
       }
       ```
       This bumps the detail text to the brighter `#f9f7f8` which meets contrast requirements.

    4. **Feature card text color check:**
       Feature card text (h3 and p elements inside `.feature-card`) uses `--text-primary` and `--text-secondary`. With the increased card background opacity, white text on semi-transparent white cards is readable. No text color changes needed here.

    These changes are conservative — they fix the visibility issue without changing the overall glassmorphic design language.
  </action>
  <verify>
    Verify shared/design-tokens.css has `--surface-elevated: rgba(255, 255, 255, 0.15)`.
    Verify App.css `.feature-card` has `background: rgba(255, 255, 255, 0.18)`.
    Verify App.css `.problem-text-detail` has `color: var(--text-primary)`.
    Run `cd frontend-public && npx tsc --noEmit` to verify TypeScript compiles (CSS-only changes, but verify nothing broke).
  </verify>
  <done>
    Feature cards are visible with glassmorphic backgrounds against the pink base. Problem section detail text has adequate contrast. Section content is clearly readable on all landing page sections.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend-public && npx tsc --noEmit` — TypeScript compiles with zero errors
2. HeroSection has hero-text-overlay div and hero-subtitle-container wrapper
3. DashboardCTA has ScrollTrigger-based scroll animation
4. App.css has .hero-text-overlay, .hero-subtitle-container, .hero-cta-container styles
5. All animations use useReducedMotion check
6. Feature cards have visible backgrounds (`rgba(255, 255, 255, 0.18)`) against pink base
7. Problem section detail text uses `--text-primary` for adequate contrast
8. `shared/design-tokens.css` has `--surface-elevated: rgba(255, 255, 255, 0.15)`
</verification>

<success_criteria>
- All 5 landing page sections have GSAP scroll-triggered animations
- Hero text is readable against skyline with pink/rose overlay
- Hero subtitle has frosted glass background treatment
- CTA button area has entrance animation
- All animations respect prefers-reduced-motion
- Feature cards are clearly visible against the pink background
- All landing page section text meets WCAG AA contrast for large text
</success_criteria>

<output>
After completion, create `.planning/phases/06.4-dashboard-landing-pages-public-hero-polish-and-citizen-auth-architecture-on-public-portal/06.4-02-SUMMARY.md`
</output>
