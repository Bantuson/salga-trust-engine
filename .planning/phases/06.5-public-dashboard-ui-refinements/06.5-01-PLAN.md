---
phase: 06.5-public-dashboard-ui-refinements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend-public/src/components/layout/PublicHeader.tsx
  - frontend-public/src/App.tsx
  - frontend-public/src/App.css
  - frontend-public/src/components/landing/FeaturesSection.tsx
  - frontend-public/src/components/landing/DashboardCTA.tsx
  - frontend-public/src/components/layout/PublicFooter.tsx
autonomous: true

must_haves:
  truths:
    - "Header hides when user scrolls down and reappears when user scrolls back to top"
    - "Every page navigation scrolls to the top of the page"
    - "How It Works scroll animation loops on repeated scroll up/down"
    - "All scroll animations reverse when scrolling back up"
    - "DashboardCTA card tint is visible as soon as scroll animation begins"
    - "Feature cards have icon and title aligned in one row with pink gloss background"
    - "View Municipal Performance CTA has pink tint glossy card wrapper"
    - "Footer Emergency Numbers title text is green with yellow hover"
    - "Mobile menu uses skyline background instead of solid pink"
    - "Mobile view has increased vertical gaps between hero elements"
    - "Mobile uses mobile-background-skyline.png as background"
    - "Nav link 'My Reports' is renamed to 'Profile'"
  artifacts:
    - path: "frontend-public/src/components/layout/PublicHeader.tsx"
      provides: "Hide-on-scroll header with scroll direction tracking"
    - path: "frontend-public/src/App.tsx"
      provides: "ScrollToTop component on route changes"
    - path: "frontend-public/src/App.css"
      provides: "Mobile background, feature card row layout, pink gloss, header scroll CSS"
    - path: "frontend-public/src/components/landing/FeaturesSection.tsx"
      provides: "GSAP ScrollTrigger with looping and reverse animations"
    - path: "frontend-public/src/components/landing/DashboardCTA.tsx"
      provides: "Scroll reveal with immediate pink tint visibility"
  key_links:
    - from: "PublicHeader.tsx"
      to: "App.css"
      via: "CSS class toggling for header hide/show"
      pattern: "public-header--hidden"
    - from: "App.tsx"
      to: "react-router-dom"
      via: "ScrollToTop component using useLocation"
      pattern: "useEffect.*scrollTo"
---

<objective>
Fix header scroll behavior, add scroll-to-top on navigation, fix GSAP animation looping/reversal, restyle home page feature cards and CTA sections, update footer colors, fix mobile layout with skyline background, and rename My Reports nav to Profile.

Purpose: Address core UX issues with persistent header obscuring content, one-shot animations, cramped mobile layout, and inconsistent card styling on the home/landing page.
Output: Refined public portal header, animations, card styling, footer, and mobile experience.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@frontend-public/src/components/layout/PublicHeader.tsx
@frontend-public/src/App.tsx
@frontend-public/src/App.css
@frontend-public/src/components/landing/FeaturesSection.tsx
@frontend-public/src/components/landing/DashboardCTA.tsx
@frontend-public/src/components/landing/ProblemSection.tsx
@frontend-public/src/components/landing/HeroSection.tsx
@frontend-public/src/components/layout/PublicFooter.tsx
@shared/design-tokens.css
@shared/components/ui/GlassCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Header hide-on-scroll, ScrollToTop, footer colors, nav rename</name>
  <files>
    frontend-public/src/components/layout/PublicHeader.tsx
    frontend-public/src/App.tsx
    frontend-public/src/App.css
    frontend-public/src/components/layout/PublicFooter.tsx
  </files>
  <action>
**PublicHeader.tsx — Hide on scroll:**
1. Add scroll direction tracking with `useState` and `useEffect`:
   - Track `lastScrollY` with useRef and `isHeaderVisible` with useState (default true)
   - On scroll: if `window.scrollY > lastScrollY` AND `window.scrollY > 80` => hide header (scrolling down)
   - If `window.scrollY < lastScrollY` => show header (scrolling up)
   - If `window.scrollY < 80` => always show header (at top of page)
   - Use requestAnimationFrame or passive scroll listener for performance
   - Add/remove CSS class `public-header--hidden` based on `isHeaderVisible`
2. Rename nav link label from `'My Reports'` to `'Profile'` in the `navLinks` array (keep `to: '/my-reports'` for now — route change happens in Plan 02)

**App.tsx — ScrollToTop:**
1. Create a `ScrollToTop` component inside App.tsx (or inline):
   ```tsx
   function ScrollToTop() {
     const { pathname } = useLocation();
     useEffect(() => {
       window.scrollTo(0, 0);
     }, [pathname]);
     return null;
   }
   ```
2. Place `<ScrollToTop />` inside `<BrowserRouter>` but before `<AuthProvider>` (or anywhere inside the router, before Routes)

**App.css — Header animation + mobile background:**
1. Add `.public-header--hidden` class:
   ```css
   .public-header--hidden {
     transform: translateY(-100%);
   }
   ```
2. Add transition to existing `.public-header`:
   ```css
   transition: background-color 0.3s ease, backdrop-filter 0.3s ease, border-bottom-color 0.3s ease, transform 0.3s ease;
   ```
3. Add mobile background using mobile-background-skyline.png:
   ```css
   @media (max-width: 767px) {
     html, body {
       background: var(--surface-base) url('/assets/mobile-background-skyline.png') center bottom / cover fixed;
     }
   }
   ```

**PublicFooter.tsx — Emergency Numbers color:**
1. Change the "Emergency Numbers" `footer-column-title` in the emergency column to use a specific class `footer-column-title--emergency`
2. In App.css, add:
   ```css
   .footer-column-title--emergency {
     color: var(--color-teal);
     transition: color 0.3s ease;
   }
   .footer-column-title--emergency:hover {
     color: var(--color-accent-gold);
   }
   ```
  </action>
  <verify>
1. `cd frontend-public && npx tsc --noEmit` — no TypeScript errors
2. `cd frontend-public && npm run build` — builds successfully
3. Manual check: header should have transform transition, ScrollToTop component present in App.tsx, footer emergency title has green class
  </verify>
  <done>
Header hides on scroll down and shows on scroll up. Every route change scrolls to top. Emergency Numbers title is green with yellow hover. Nav shows "Profile" instead of "My Reports". Mobile uses mobile-background-skyline.png.
  </done>
</task>

<task type="auto">
  <name>Task 2: GSAP animation fixes, feature card restyling, CTA wrapper, mobile gaps</name>
  <files>
    frontend-public/src/components/landing/FeaturesSection.tsx
    frontend-public/src/components/landing/DashboardCTA.tsx
    frontend-public/src/App.css
  </files>
  <action>
**FeaturesSection.tsx — Loop and reverse animations:**
1. Change `toggleActions` from `'play none none none'` to `'play none none reverse'` so animations reverse when scrolling back up
2. Add `once: false` to the scrollTrigger config (this is default but be explicit)
3. The combination of `'play none none reverse'` means: play on enter, do nothing on leave-bottom, do nothing on enter-back, reverse on leave-top. This creates a loop effect — every time user scrolls down past the trigger, animation plays; scrolling up reverses it.

**FeaturesSection.tsx — Card icon + title row layout, pink gloss:**
1. Change all three `GlassCard` components from `variant="default"` to `variant="elevated"` (this gives pink gloss background)
2. Restructure each card's icon + title to be in a row layout:
   ```tsx
   <div className="feature-card-header">
     <div className="feature-icon">...</div>
     <h3 className="feature-title">Report</h3>
   </div>
   <p className="feature-description">...</p>
   ```
   For the Transparency card specifically, the icon goes on the right and title on the left:
   ```tsx
   <div className="feature-card-header feature-card-header--reversed">
     <h3 className="feature-title">Transparency</h3>
     <div className="feature-icon">...</div>
   </div>
   ```

**App.css — Feature card header row styling:**
1. Add CSS for the new feature card header row:
   ```css
   .feature-card-header {
     display: flex;
     align-items: center;
     gap: var(--space-md);
     margin-bottom: var(--space-md);
   }
   .feature-card-header--reversed {
     flex-direction: row-reverse;
   }
   .feature-card-header .feature-icon {
     margin-bottom: 0; /* Override existing margin */
   }
   .feature-card-header .feature-title {
     margin-bottom: 0; /* Override existing margin */
   }
   ```

**DashboardCTA.tsx — Fix tint visibility on scroll start:**
1. The issue is that the GlassCard's pink tint only appears after scroll completes (opacity goes from 0 to 1).
   Since the card uses `variant="elevated"` (pink frost), and the parent section fades from opacity 0, the pink tint is invisible during the animation.
   Fix: Use `gsap.fromTo` instead of `gsap.from`, starting at `opacity: 0.3` instead of `opacity: 0` so the pink tint is partially visible from the start:
   ```tsx
   gsap.fromTo(sectionRef.current,
     { opacity: 0.3, y: 60 },
     { opacity: 1, y: 0, duration: 1, ease: 'power3.out', scrollTrigger: { ... } }
   );
   ```

**HeroSection / Home page — Add CTA card wrapper for "View Municipal Performance":**
1. In HeroSection.tsx, wrap the "View Municipal Performance" CTA link in a pink GlassCard wrapper similar to the DashboardCTA section's card:
   - The `hero-cta-container` div that wraps the CTA link should get a GlassCard elevated wrapper
   - Import GlassCard and wrap:
   ```tsx
   <div ref={ctaRef} className="hero-cta-container">
     <GlassCard variant="elevated" className="hero-cta-card">
       <Link to="/dashboard" className="hero-cta">
         <span className="text-coral">View Municipal Performance</span>
       </Link>
     </GlassCard>
   </div>
   ```
2. Add CSS for `.hero-cta-card` to ensure it displays inline-block and doesn't take full width:
   ```css
   .hero-cta-card {
     display: inline-block;
   }
   ```

**App.css — Mobile gaps for home page:**
1. Add mobile-specific spacing for hero elements:
   ```css
   @media (max-width: 767px) {
     .hero-content {
       padding-top: var(--space-3xl);
     }
     .hero-headline {
       margin-bottom: var(--space-2xl);
     }
     .hero-subtitle-container {
       margin-bottom: var(--space-2xl);
     }
     .hero-cta-container {
       margin-top: var(--space-xl);
     }
   }
   ```

**App.css — Mobile menu skyline background:**
1. Change `.mobile-menu-overlay` background from `rgba(163, 72, 102, 0.96)` to use the skyline:
   ```css
   .mobile-menu-overlay {
     background: url('/assets/skyline.png') center bottom / cover no-repeat;
   }
   .mobile-menu-overlay::before {
     content: '';
     position: absolute;
     inset: 0;
     background: rgba(163, 72, 102, 0.85);
     backdrop-filter: blur(10px);
     z-index: -1;
   }
   ```
   This shows the skyline through a semi-transparent pink overlay.

**ProblemSection.tsx — Already uses `'play none none reverse'`, so no change needed.**
  </action>
  <verify>
1. `cd frontend-public && npx tsc --noEmit` — no TypeScript errors
2. `cd frontend-public && npm run build` — builds successfully
3. Check FeaturesSection uses `toggleActions: 'play none none reverse'`
4. Check GlassCard variant="elevated" on feature cards
5. Check feature-card-header class exists in CSS with flex row layout
6. Check DashboardCTA uses fromTo with opacity starting at 0.3
7. Check mobile menu overlay has skyline background
  </verify>
  <done>
Feature cards animate on every scroll pass (loop) and reverse on scroll up. Feature cards have pink gloss background with icon+title in a row. DashboardCTA tint visible from scroll start. Hero CTA wrapped in pink glass card. Mobile menu shows skyline background. Mobile hero has increased vertical gaps.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend-public && npm run build` — zero errors
2. Header hides on scroll, shows at top or on scroll up
3. Route navigation scrolls to page top
4. Feature cards animate on repeated scroll, reverse on scroll up
5. Feature cards use pink gloss background with icon+title row
6. DashboardCTA pink tint visible during scroll animation
7. Hero CTA has pink card wrapper
8. Mobile menu shows skyline background
9. Mobile hero elements have increased spacing
10. Footer Emergency Numbers title is green/teal with yellow hover
11. Nav shows "Profile" instead of "My Reports"
</verification>

<success_criteria>
- Both tasks complete without TypeScript or build errors
- All 12 must-have truths are verifiable in the browser
- No existing functionality broken (animations still respect prefers-reduced-motion)
</success_criteria>

<output>
After completion, create `.planning/phases/06.5-public-dashboard-ui-refinements/06.5-01-SUMMARY.md`
</output>
