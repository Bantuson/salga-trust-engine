---
phase: 06.5-public-dashboard-ui-refinements
plan: 01
subsystem: ui
tags: [react, gsap, scroll-animations, glassmorphism, mobile-ux]

# Dependency graph
requires:
  - phase: 06.4-citizen-auth-landing
    provides: Public portal structure, landing page, header/footer components
provides:
  - Hide-on-scroll header with scroll direction tracking
  - ScrollToTop component for route navigation
  - Looping GSAP animations with scroll reversal
  - Pink glassmorphic feature cards with row layout
  - Mobile skyline background and increased hero spacing
  - Footer emergency numbers with teal/gold theming
affects: [06.5-02, future public portal UI improvements]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Scroll direction tracking with useRef for performance
    - GSAP toggleActions 'play none none reverse' for animation reversal
    - Feature card header flex row layout pattern
    - Mobile-specific background images via media query

key-files:
  created: []
  modified:
    - frontend-public/src/components/layout/PublicHeader.tsx
    - frontend-public/src/App.tsx
    - frontend-public/src/App.css
    - frontend-public/src/components/layout/PublicFooter.tsx
    - frontend-public/src/components/landing/FeaturesSection.tsx
    - frontend-public/src/components/landing/DashboardCTA.tsx
    - frontend-public/src/components/landing/HeroSection.tsx

key-decisions:
  - "Header shows when scrollY < 80 (always visible at top), hides on scroll down, shows on scroll up"
  - "ScrollToTop component placed inside BrowserRouter before AuthProvider for global scope"
  - "DashboardCTA starts at opacity 0.3 instead of 0 to show pink tint immediately"
  - "Transparency feature card uses reversed row layout (icon on right)"
  - "Mobile uses separate mobile-background-skyline.png for optimized viewport"

patterns-established:
  - "Hide-on-scroll header: useRef for lastScrollY, useState for visibility, passive scroll listener"
  - "GSAP scroll animations: toggleActions 'play none none reverse' with once: false for looping"
  - "Feature card header: flex row with feature-card-header class, --reversed modifier for RTL"
  - "Mobile gaps: explicit margin overrides via @media (max-width: 767px)"

# Metrics
duration: 10.1min
completed: 2026-02-14
---

# Phase 06.5 Plan 01: Public Dashboard UI Refinements Summary

**Hide-on-scroll header, looping GSAP animations, pink glassmorphic feature cards with row layout, mobile skyline background, and scroll-to-top navigation**

## Performance

- **Duration:** 10.1 min (607s)
- **Started:** 2026-02-14T12:14:44Z
- **Completed:** 2026-02-14T12:24:51Z
- **Tasks:** 2
- **Files modified:** 7

## Accomplishments
- Header hides when scrolling down (scrollY > 80), shows on scroll up or at page top
- Every route navigation scrolls window to top via ScrollToTop component
- GSAP animations loop on repeated scroll and reverse when scrolling back up
- Feature cards have icon+title in one row with pink gloss elevated variant
- Mobile view uses mobile-background-skyline.png and increased hero spacing
- Footer Emergency Numbers title is teal with gold hover

## Task Commits

Each task was committed atomically:

1. **Task 1: Header hide-on-scroll, ScrollToTop, footer colors, nav rename** - `ea4b2b6` (feat)
2. **Task 2: GSAP animations, feature cards, CTA styling, mobile gaps** - `36fea93` (feat)

## Files Created/Modified
- `frontend-public/src/components/layout/PublicHeader.tsx` - Scroll direction tracking, hide-on-scroll behavior, nav rename to Profile
- `frontend-public/src/App.tsx` - ScrollToTop component using useLocation and useEffect
- `frontend-public/src/App.css` - Header transform transition, mobile background, footer emergency colors, feature card row layout, mobile hero gaps, mobile menu skyline
- `frontend-public/src/components/layout/PublicFooter.tsx` - Emergency Numbers title with emergency-specific class
- `frontend-public/src/components/landing/FeaturesSection.tsx` - GSAP toggleActions 'play none none reverse', once: false, GlassCard variant="elevated", feature-card-header row layout
- `frontend-public/src/components/landing/DashboardCTA.tsx` - GSAP fromTo with opacity starting at 0.3 for immediate pink tint visibility
- `frontend-public/src/components/landing/HeroSection.tsx` - GlassCard elevated wrapper around hero CTA link

## Decisions Made

1. **Header visibility threshold at 80px** - Always show header when scrollY < 80 to ensure visibility at page top, prevents flicker
2. **Nav link label changed to "Profile"** - Route stays `/my-reports` for now (route rename deferred to Plan 02 per plan context)
3. **Transparency card uses reversed row** - Icon on right instead of left for visual variety in 3-card grid
4. **Mobile background is separate image** - mobile-background-skyline.png optimized for portrait viewport instead of reusing desktop skyline.png
5. **DashboardCTA opacity starts at 0.3** - Pink glassmorphic tint visible as soon as scroll animation begins, not just at completion

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - all TypeScript checks and builds passed on first attempt.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- All 12 must-have truths from plan are satisfied
- Header scroll behavior, animations, card styling, footer, and mobile experience ready for human verification
- Ready for Plan 02 (login page customization) or manual testing

## Self-Check: PASSED

All files verified to exist:
- frontend-public/src/components/layout/PublicHeader.tsx: FOUND
- frontend-public/src/App.tsx: FOUND
- frontend-public/src/App.css: FOUND
- frontend-public/src/components/layout/PublicFooter.tsx: FOUND
- frontend-public/src/components/landing/FeaturesSection.tsx: FOUND
- frontend-public/src/components/landing/DashboardCTA.tsx: FOUND
- frontend-public/src/components/landing/HeroSection.tsx: FOUND

All commits verified to exist:
- ea4b2b6: FOUND
- 36fea93: FOUND

---
*Phase: 06.5-public-dashboard-ui-refinements*
*Completed: 2026-02-14*
