---
phase: 10.1
slug: auth-system-diagnosis-fix-invalid-credentials-and-enable-email-code-verification-for-dashboards
status: draft
nyquist_compliant: true
wave_0_complete: false
created: 2026-02-24
---

# Phase 10.1 — Validation Strategy

> Generated by `gsd-plan-checker` during plan verification on 2026-02-24.
> Governs feedback sampling during `/gsd:execute-phase 10.1`.

---

## Test Infrastructure

| Property | Value |
|----------|-------|
| **Framework** | TypeScript compiler (tsc --noEmit) for structural correctness |
| **Config file** | `frontend-public/tsconfig.json`, `frontend-dashboard/tsconfig.json` |
| **Quick run command** | `cd frontend-public && npx tsc --noEmit && cd ../frontend-dashboard && npx tsc --noEmit` |
| **Full suite command** | Same as quick run (phase is frontend-only, no backend pytest scope) |
| **Estimated runtime** | ~20-40 seconds |
| **CI pipeline** | .github/workflows/test.yml — exists (from Phase 06.9.2-03) |

---

## Nyquist Sampling Rate

> The minimum feedback frequency required to reliably catch errors in this phase.

- **After every task commit:** Run `npx tsc --noEmit` in both frontend directories
- **After every plan wave:** Run full tsc in both frontends
- **Before `/gsd:verify-work`:** Full suite must be green + manual OTP flow test
- **Maximum acceptable task feedback latency:** ~40 seconds

---

## Per-Task Verification Map

| Task ID | Plan | Wave | Requirement | Test Type | Automated Command | File Exists | Status |
|---------|------|------|-------------|-----------|-------------------|-------------|--------|
| 10.1-01-01 | 01 | 1 | SEC-01, SEC-02 | type-check | `cd frontend-public && npx tsc --noEmit && cd ../frontend-dashboard && npx tsc --noEmit` | ✅ existing | ⬜ pending |
| 10.1-01-02 | 01 | 1 | SEC-01, SEC-02 | type-check | `cd frontend-public && npx tsc --noEmit && cd ../frontend-dashboard && npx tsc --noEmit` | ✅ existing | ⬜ pending |
| 10.1-02-01 | 02 | 2 | SEC-01, SEC-02 | type-check | `cd frontend-public && npx tsc --noEmit && cd ../frontend-dashboard && npx tsc --noEmit` | ✅ existing | ⬜ pending |
| 10.1-02-02 | 02 | 2 | SEC-01, SEC-02 | manual | checkpoint:human-verify (blocking gate) | N/A — human | ⬜ pending |

*Status values: ⬜ pending · ✅ green · ❌ red · ⚠️ flaky*

---

## Wave 0 Requirements

Existing TypeScript infrastructure covers all phase requirements — no Wave 0 test tasks needed.

The tsc --noEmit verify is available immediately from existing tsconfig.json files in both frontend directories. No scaffolding is required before implementation begins.

---

## Manual-Only Verifications

> Behaviors that genuinely cannot be automated, with justification.

| Behavior | Requirement | Why Manual | Test Instructions |
|----------|-------------|------------|-------------------|
| OTP email template shows 6-digit code (not magic link URL) | SEC-01, SEC-02 | Requires Supabase Dashboard UI inspection + live email delivery test | Go to Supabase Dashboard > Authentication > Email Templates > check "Confirm signup" and "Magic Link" slots for {{ .Token }} as plain text |
| OTP code delivered to real email inbox | SEC-01 | External email delivery; cannot be automated in CI | Register test account, check email inbox, confirm 6-digit code received |
| Session created after OTP verification | SEC-01 | Runtime Supabase auth state; tsc cannot validate | After entering correct code, verify browser session cookie set and profile page loads |
| SQL remediation confirms stuck accounts | SEC-02 | Supabase MCP tool call; not code artifact | Run SQL: SELECT email, email_confirmed_at FROM auth.users WHERE email_confirmed_at IS NULL |
| Supabase Dashboard template slot configuration | SEC-01 | External SaaS configuration; no code artifact | Verify both "Confirm signup" and "Magic Link" template slots contain otp-supabase-paste.html |

---

## Validation Sign-Off

Updated by `gsd-plan-checker` after plan approval (2026-02-24):

- [x] All implementation tasks have `<automated>` verify commands (tsc --noEmit)
- [x] No 3 consecutive implementation tasks without automated verify (3/3 have tsc)
- [x] No Wave 0 test files needed (existing tsconfig covers structural validation)
- [x] No watch-mode flags in any automated command
- [x] Feedback latency per task: ~40s ✅
- [x] `nyquist_compliant: true` set in frontmatter

**Note:** The tsc verify is narrower than ideal — it catches type errors but not runtime OTP flow correctness. Manual verification (Task 2, Plan 02 checkpoint) is the primary gate for runtime correctness. This is acceptable for a focused auth bug-fix phase with 4 clearly scoped tasks.

**Plan-checker approval:** approved on 2026-02-24

---

## Execution Tracking

Updated during `/gsd:execute-phase 10.1`:

| Wave | Tasks | Tests Run | Pass | Fail | Sampling Status |
|------|-------|-----------|------|------|-----------------|
| 1 | 2 | npx tsc --noEmit (both frontends) | — | — | ⬜ pending |
| 2 | 2 | npx tsc --noEmit (both frontends) + human checkpoint | — | — | ⬜ pending |

**Phase validation complete:** pending
