---
phase: 06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency
plan: 07
type: execute
wave: 4
depends_on: ["06.2-02", "06.2-03", "06.2-04", "06.2-05", "06.2-06"]
files_modified:
  - frontend-dashboard/src/pages/DashboardPage.tsx
  - frontend-dashboard/src/pages/TicketListPage.tsx
  - frontend-dashboard/src/components/dashboard/MetricsCards.tsx
  - frontend-public/src/pages/TransparencyDashboardPage.tsx
  - frontend-public/src/pages/LandingPage.tsx
  - frontend-public/src/App.css
  - frontend-dashboard/src/App.css
autonomous: false

must_haves:
  truths:
    - "Both dashboards build successfully with zero TypeScript errors"
    - "Skeleton loaders appear during data loading in both dashboards"
    - "Shared design system is consistent across both apps (same fonts, colors, components)"
    - "All interactive elements have hover, focus, and disabled states"
    - "prefers-reduced-motion is respected throughout both apps"
  artifacts:
    - path: "frontend-dashboard/src/pages/DashboardPage.tsx"
      provides: "Dashboard with skeleton loaders during loading"
      contains: "Skeleton"
    - path: "frontend-public/src/pages/TransparencyDashboardPage.tsx"
      provides: "Transparency dashboard with skeleton loaders"
      contains: "Skeleton"
  key_links:
    - from: "frontend-dashboard/src/"
      to: "shared/components/"
      via: "shared component imports"
      pattern: "@shared/components"
    - from: "frontend-public/src/"
      to: "shared/components/"
      via: "shared component imports"
      pattern: "@shared/components"
---

<objective>
Add skeleton loaders to all data-loading states, apply final micro-interaction polish across both dashboards, ensure design system consistency, verify both apps build, and visually verify the complete user experience.

Purpose: Final quality pass ensures consistent premium feel across the entire platform. Skeleton loaders eliminate jarring loading states. Micro-interactions add polish. This plan also includes a human verification checkpoint to confirm the visual design meets expectations.

Output: Both dashboards with skeleton loaders, consistent micro-interactions, verified builds, and human-approved visual design.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-CONTEXT.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-01-SUMMARY.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-02-SUMMARY.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-03-SUMMARY.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-04-SUMMARY.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-05-SUMMARY.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add skeleton loaders, micro-interaction polish, and build verification</name>
  <files>
    frontend-dashboard/src/pages/DashboardPage.tsx
    frontend-dashboard/src/pages/TicketListPage.tsx
    frontend-dashboard/src/components/dashboard/MetricsCards.tsx
    frontend-public/src/pages/TransparencyDashboardPage.tsx
    frontend-public/src/pages/LandingPage.tsx
    frontend-public/src/App.css
    frontend-dashboard/src/App.css
  </files>
  <action>
    **1. Add skeleton loaders to municipal dashboard:**

    **DashboardPage.tsx:**
    - During loading state (before metrics data arrives), show skeleton:
      - 4 metric card skeletons (GlassCard + Skeleton inside for number and label)
      - Chart area skeletons (rectangular Skeleton matching chart dimensions)
    - Import shared Skeleton component and SkeletonTheme
    - Wrap loading content in SkeletonTheme for dark mode colors

    **MetricsCards.tsx:**
    - Add loading prop: `loading?: boolean`
    - When loading, render GlassCard shells with Skeleton lines inside (height and width matching actual content)
    - Keep existing anime.js counter animations for when data arrives

    **TicketListPage.tsx:**
    - During loading, show table skeleton:
      - Header row with Skeleton cells
      - 5-8 body rows with Skeleton cells matching column widths
    - Add filter bar skeleton (3 rectangular Skeletons matching filter inputs)

    **2. Add skeleton loaders to public dashboard:**

    **TransparencyDashboardPage.tsx:**
    - While charts load, show:
      - Municipality selector skeleton
      - 3 metric card skeletons
      - Chart area skeletons (rectangular)
      - Heatmap skeleton (large rectangular with shimmer)
    - Use shared SkeletonTheme

    **LandingPage.tsx:**
    - GlobeLoadingSkeleton already exists — verify it uses shared Skeleton theme
    - LiveStatsSection: show Skeleton numbers before intersection observer triggers counters

    **3. Micro-interaction polish across both dashboards:**

    **Buttons:**
    - Ensure ALL buttons (shared Button component and inline buttons) have:
      - Hover: scale(1.02), subtle shadow increase
      - Active (mousedown): scale(0.98) for press feedback
      - Focus: visible focus ring (teal outline, 2px offset)
      - Disabled: opacity 0.5, cursor not-allowed
    - Add to both App.css files

    **Cards:**
    - Ensure ALL GlassCard instances have:
      - Hover (interactive variant): translateY(-2px), border brightens
      - Transition: 0.2s ease for smooth feel
    - Verify cards in: DashboardPage, TransparencyDashboardPage, CitizenPortalPage

    **Links and nav:**
    - All nav links: underline slide-in from left on hover (CSS pseudo-element)
    - Active links: coral underline visible

    **Form inputs:**
    - Focus: teal border + subtle teal glow
    - Error: coral border + subtle coral glow
    - Transition between states: 0.15s ease

    **4. Design consistency audit:**
    - Verify both apps import `@shared/design-tokens.css` and `@shared/animations.css`
    - Verify both apps use Space Grotesk for headings (check --font-display usage)
    - Verify both apps use Inter for body (check --font-body usage)
    - Verify color consistency: coral (#FF6B4A), teal (#00D9A6), navy (#0A0E1A) used consistently
    - Fix any hardcoded color values that should use CSS custom properties

    **5. prefers-reduced-motion final check:**
    - Verify animations.css has the global `prefers-reduced-motion: reduce` media query
    - Verify GSAP-based animations in landing sections check useReducedMotion
    - Verify anime.js counters degrade gracefully (show final number immediately)
    - Verify 3D globe disables auto-rotation on reduced motion

    **6. Build both apps:**
    ```bash
    cd frontend-dashboard && npm run build
    cd frontend-public && npm run build
    ```
    Both must succeed with zero errors. Fix any TypeScript or build errors encountered.

    **7. Document any shared component adjustments:**
    If any shared components needed modification during this polish pass, document what changed and why.
  </action>
  <verify>
    - `grep "Skeleton\|skeleton" frontend-dashboard/src/pages/DashboardPage.tsx` — skeleton loaders in dashboard
    - `grep "Skeleton\|skeleton" frontend-dashboard/src/pages/TicketListPage.tsx` — skeleton loaders in ticket list
    - `grep "Skeleton\|skeleton" frontend-public/src/pages/TransparencyDashboardPage.tsx` — skeleton loaders in transparency dashboard
    - `grep "scale.*1.02\|scale.*0.98" frontend-dashboard/src/App.css frontend-public/src/App.css` — button micro-interactions
    - `grep "prefers-reduced-motion" shared/animations.css` — global reduced motion media query
    - `cd frontend-dashboard && npm run build` — builds successfully
    - `cd frontend-public && npm run build` — builds successfully
  </verify>
  <done>
    Skeleton loaders added to all loading states in both dashboards. Button/card/input micro-interactions polished. Design system consistency verified. prefers-reduced-motion respected. Both apps build with zero errors.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of complete UX redesign</name>
  <what-built>
    Complete Phase 6.2 UX redesign across both dashboards:
    1. Shared design system: Space Grotesk + Inter typography, GlassCard, Button, Input, Skeleton, Badge, AnimatedGradientBg, NdebelePattern
    2. Public site: 4-page structure (Landing, Transparency Dashboard, Report Issue redirect, About) with transparent header and footer
    3. Municipal dashboard: React Router, icon-only sidebar with role-based nav, RegisterPage, AnimatedGradientBg login/register
    4. 3D globe: Premium MeshPhysicalMaterial with metallic/glass finish, glowing municipality data points, atmospheric effects
    5. Scroll animations: Polished timing, parallax, NdebelePattern accents, prefers-reduced-motion support
    6. Municipality registration: Request Access form
    7. Onboarding wizard: 5-step wizard with progress tracking
    8. Citizen portal: My Reports page with personal analytics and GBV privacy cards
    9. Enhanced heatmap: Time filter, category toggles, click-to-drill
    10. Skeleton loaders and micro-interactions throughout
  </what-built>
  <how-to-verify>
    **Start the public dashboard:**
    ```bash
    cd frontend-public && npm run dev
    ```
    Open http://localhost:5174 (or whatever port)

    1. **Landing page**: Scroll through all 7 sections. Verify:
       - 3D globe has metallic/glass appearance (not flat colors)
       - Globe has glowing data points at municipality locations
       - Scroll animations are smooth and cinematic
       - NdebelePattern accents visible as subtle decorations
       - Space Grotesk font on headings, Inter on body text
       - Animated gradient background (subtle shifting, not static navy)

    2. **Navigation**: Click through all 4 pages:
       - Home (/) — scroll storytelling landing
       - Dashboard (/dashboard) — separate transparency dashboard with charts and heatmap
       - Report Issue (/report) — redirect message with sign-in CTA
       - About (/about) — process overview and FAQ
       - Header: transparent over hero, solid on scroll

    3. **Transparency Dashboard**: Verify:
       - Separate dedicated page (NOT embedded in landing)
       - Heatmap has time filter slider and category toggles
       - Charts load with skeleton loaders first

    4. **My Reports** (/my-reports): Verify:
       - Personal stats cards (total, resolved, avg time)
       - Regular ticket cards with full details
       - GBV case card: lock icon, limited info, emergency numbers (10111, 0800 150 150)

    **Start the municipal dashboard:**
    ```bash
    cd frontend-dashboard && npm run dev
    ```
    Open http://localhost:5173 (or whatever port)

    5. **Login page**: Verify:
       - Animated gradient background (not static)
       - Glassmorphism card
       - 3D decorative globe
       - "Don't have an account? Register" link
       - "Municipality? Request Access" link

    6. **Register page** (/register): Verify matching design to login

    7. **Request Access page** (/request-access): Verify:
       - Province dropdown with 9 SA provinces
       - Document upload area
       - Submission shows confirmation message

    8. **After login** (if auth works): Verify:
       - Icon-only sidebar on left (64px wide)
       - Hover sidebar to see labels expand (240px)
       - Dashboard metrics with skeleton loaders during load

    9. **Onboarding** (/onboarding): Verify:
       - Progress bar with step circles
       - 5 steps flow correctly
       - Skip works for optional steps
       - Completion celebration

    10. **Mobile**: Resize browser to mobile width. Verify:
        - Hamburger menu on public site
        - Hamburger menu on municipal dashboard
        - Responsive layouts throughout

    11. **Reduced motion**: In OS settings or browser dev tools, enable `prefers-reduced-motion: reduce`. Verify:
        - No scroll animations on landing page (content visible immediately)
        - No globe rotation
        - No gradient animation
        - Content still functional

    Report any issues for fixes.
  </how-to-verify>
  <resume-signal>Type "approved" to complete the phase, or describe specific issues that need fixing.</resume-signal>
</task>

</tasks>

<verification>
1. Both `npm run build` commands succeed with zero errors
2. Skeleton loaders appear during loading states in both dashboards
3. Design system consistency: same fonts, colors, component styles across apps
4. All interactive elements have proper hover/focus/disabled states
5. prefers-reduced-motion disables decorative animations
6. Human verification confirms visual quality meets premium standard
</verification>

<success_criteria>
- Both dashboards build and run without errors
- Loading states use skeleton loaders instead of blank screens or spinners
- Consistent premium aesthetic across the entire platform
- Accessibility: reduced motion is respected, focus states are visible
- Human approves the overall visual design and user experience
</success_criteria>

<output>
After completion, create `.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-07-SUMMARY.md`
</output>
