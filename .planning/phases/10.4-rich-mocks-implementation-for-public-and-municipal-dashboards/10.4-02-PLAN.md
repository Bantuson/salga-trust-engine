---
phase: 10.4-rich-mocks-implementation-for-public-and-municipal-dashboards
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend-public/src/data/mockDashboardData.ts
  - frontend-public/src/data/mockCitizenTickets.ts
  - frontend-public/src/hooks/useCitizenReports.ts
  - frontend-public/src/pages/LandingPage.tsx
  - frontend-public/src/pages/AboutPage.tsx
  - frontend-public/src/pages/ProfilePage.tsx
autonomous: true
requirements:
  - TRNS-01
  - TRNS-02
  - TRNS-03
  - TRNS-04
  - TRNS-05

must_haves:
  truths:
    - "Transparency Dashboard shows 5 SA municipalities (not 2) with realistic performance data"
    - "Landing page statistics reflect 5 municipalities and 3000+ total tickets"
    - "Citizen Portal demo mode shows 5 SA-authentic past tickets with status updates and resolution notes"
    - "Resolution rate trends show improvement arc (rates climbing over 6 months)"
    - "Heatmap data includes points across all 5 municipalities with diverse categories"
    - "Category breakdown shows realistic distribution across water, electricity, roads, waste, sanitation, other"
    - "GBV data is NEVER present in any public dashboard mock data (TRNS-05)"
    - "All mock citizen names are culturally authentic South African names"
  artifacts:
    - path: "frontend-public/src/data/mockDashboardData.ts"
      provides: "5 municipalities, rich response times, resolution rates with trend, heatmap, category breakdown, system summary"
    - path: "frontend-public/src/data/mockCitizenTickets.ts"
      provides: "DEMO_TICKETS (5 CitizenTicket[]) and DEMO_STATS with SA-authentic data"
  key_links:
    - from: "frontend-public/src/hooks/usePublicStats.ts"
      to: "frontend-public/src/data/mockDashboardData.ts"
      via: "import mockMunicipalities, mockResponseTimes, etc. — already wired as fallbacks"
      pattern: "import.*mock.*from.*data/mockDashboardData"
    - from: "frontend-public/src/hooks/useCitizenReports.ts"
      to: "frontend-public/src/data/mockCitizenTickets.ts"
      via: "import DEMO_TICKETS, DEMO_STATS from central mock file"
      pattern: "import.*DEMO_TICKETS.*from.*data/mockCitizenTickets"
---

<objective>
Enrich public dashboard mock data from sparse 2-municipality placeholders to rich 5-municipality SA-authentic data, and replace generic demo tickets in the Citizen Portal with culturally authentic South African citizen experience data.

Purpose: Make the public transparency dashboard look production-ready — showing 5 real SA municipalities with improving performance trends, realistic geographic heatmap data, and a citizen portal that demonstrates the full ticket lifecycle with SA-authentic names and descriptions.

Output: Updated `mockDashboardData.ts` (enriched from 2 to 5 municipalities), new `mockCitizenTickets.ts` (replaces inline DEMO_TICKETS), updated hooks and pages to use enriched data.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10.4-rich-mocks-implementation-for-public-and-municipal-dashboards/10.4-CONTEXT.md
@.planning/phases/10.4-rich-mocks-implementation-for-public-and-municipal-dashboards/10.4-RESEARCH.md

@frontend-public/src/types/public.ts
@frontend-public/src/data/mockDashboardData.ts
@frontend-public/src/hooks/usePublicStats.ts
@frontend-public/src/hooks/useCitizenReports.ts
@frontend-public/src/pages/LandingPage.tsx
@frontend-public/src/pages/AboutPage.tsx
@frontend-public/src/pages/ProfilePage.tsx
@frontend-public/src/pages/CitizenPortalPage.tsx
@frontend-public/src/pages/TransparencyDashboardPage.tsx

<interfaces>
<!-- Key types and contracts the executor needs. Extracted from codebase. -->

From frontend-public/src/types/public.ts:
```typescript
export interface Municipality {
  id: string;
  name: string;
  code: string;
  province: string;
}
export interface ResponseTimeData {
  municipality_id: string;
  municipality_name: string;
  avg_response_hours: number;
  ticket_count: number;
}
export interface MonthlyTrend {
  month: string;  // "2026-01"
  rate: number;
}
export interface ResolutionRateData {
  municipality_id: string;
  municipality_name: string;
  resolution_rate: number;
  total_tickets: number;
  resolved_tickets: number;
  trend: MonthlyTrend[];
}
export interface HeatmapPoint {
  lat: number;
  lng: number;
  intensity: number;
  category?: string;
}
export interface SystemSummary {
  total_municipalities: number;
  total_tickets: number;
  total_sensitive_tickets: number;
}
export interface CategoryBreakdownData {
  category: string;
  count: number;
}
```

From frontend-public/src/hooks/useCitizenReports.ts:
```typescript
export interface CitizenTicket {
  tracking_number: string;
  category?: string;
  status: string;
  created_at?: string;
  address?: string | null;
  severity?: string;
  assigned_to_name?: string | null;
  assigned_team_name?: string | null;
  media_count?: number;
  is_sensitive: boolean;
  // GBV-specific (only when is_sensitive=true):
  assigned_officer_name?: string | null;
  station_name?: string | null;
  station_phone?: string | null;
}
export interface CitizenStats {
  total_reports: number;
  resolved_count: number;
  avg_resolution_days: number | null;
  municipality_avg_resolution_days: number | null;
}
```

Existing mockDashboardData.ts exports:
```typescript
export const mockSystemSummary: SystemSummary;
export const mockMunicipalities: Municipality[];
export const mockResponseTimes: ResponseTimeData[];
export const mockResolutionRates: ResolutionRateData[];
export const mockCategoryBreakdown: CategoryBreakdownData[];
export const mockHeatmapData: HeatmapPoint[];
```

Existing usePublicStats.ts already imports all of these as fallbacks — the hooks are ALREADY WIRED.
The only task is to replace the DATA CONTENT to be richer and more authentic.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enrich mockDashboardData.ts with 5 SA municipalities and realistic data</name>
  <files>
    frontend-public/src/data/mockDashboardData.ts
  </files>
  <action>
Rewrite `frontend-public/src/data/mockDashboardData.ts` to replace the sparse 2-municipality data with rich 5-municipality data. The imports from `../types/public` stay the same. All existing export names MUST stay identical (they are already consumed by `usePublicStats.ts`).

**mockSystemSummary** — Update values:
```typescript
export const mockSystemSummary: SystemSummary = {
  total_municipalities: 5,
  total_tickets: 3247,
  total_sensitive_tickets: 0,  // TRNS-05: never expose GBV counts on public dashboard
};
```

**mockMunicipalities** — 5 real SA municipalities:
1. `{ id: 'eth-001', name: 'eThekwini Metropolitan', code: 'ETH', province: 'KwaZulu-Natal' }`
2. `{ id: 'man-001', name: 'Mangaung Metropolitan', code: 'MAN', province: 'Free State' }`
3. `{ id: 'buf-001', name: 'Buffalo City Metropolitan', code: 'BUF', province: 'Eastern Cape' }`
4. `{ id: 'nmb-001', name: 'Nelson Mandela Bay', code: 'NMB', province: 'Eastern Cape' }`
5. `{ id: 'joh-001', name: 'City of Johannesburg', code: 'JHB', province: 'Gauteng' }`

**mockResponseTimes** — One entry per municipality with realistic avg_response_hours (higher for larger metros):
- eThekwini: 28.4h, 812 tickets
- Mangaung: 18.6h, 504 tickets
- Buffalo City: 22.1h, 467 tickets
- Nelson Mandela Bay: 31.5h, 589 tickets
- City of Johannesburg: 36.2h, 875 tickets

**mockResolutionRates** — One entry per municipality with 6-month trend showing improvement arc (every municipality's rate is climbing):
- eThekwini: 71% resolution, trend from 58% to 74%
- Mangaung: 79% resolution, trend from 68% to 82%
- Buffalo City: 68% resolution, trend from 55% to 71%
- Nelson Mandela Bay: 65% resolution, trend from 52% to 68%
- City of Johannesburg: 62% resolution, trend from 50% to 66%
- Trend months: '2025-09' through '2026-02' (6 entries each), each month ~2-4% higher than previous

**mockCategoryBreakdown** — Realistic SA municipal issue distribution:
- roads (potholes): 487
- water: 612
- electricity: 534
- waste: 389
- sanitation: 298
- other: 412

Note: Use category values that match the existing codebase — check what TransparencyDashboardPage expects. The categories here are `'roads'`, `'water'`, `'electricity'`, `'waste'`, `'sanitation'`, `'other'` (from CATEGORY_CONFIG). Do NOT use `'potholes'` as a category key — use `'roads'`.

**mockHeatmapData** — Expand from 20 to ~35-40 points across all 5 municipalities. Include real GPS coordinates:
- eThekwini (Durban): CBD (-29.8587, 31.0218), uMlazi (-29.9631, 30.8967), KwaMashu (-29.7460, 30.9785), Pinetown (-29.8167, 30.8500)
- Mangaung (Bloemfontein): CBD (-29.1167, 26.2167), Botshabelo (-29.2667, 26.7167), Thaba Nchu (-29.2167, 26.8333)
- Buffalo City (East London): CBD (-33.0153, 27.9116), Mdantsane (-32.9500, 27.7667), King William's Town (-32.8800, 27.3900)
- Nelson Mandela Bay (PE): CBD (-33.9608, 25.6022), KwaZakhele (-33.8833, 25.6333), Motherwell (-33.8000, 25.7500)
- City of Johannesburg: Sandton (-26.1076, 28.0567), Soweto (-26.2485, 27.8546), Hillbrow (-26.1875, 28.0475), Alexandra (-26.1068, 28.1092), CBD (-26.2041, 28.0473)
- Intensity 4-9, diverse categories across all points

**TRNS-05 CRITICAL:** No `'gbv'` category anywhere in this file. No sensitive data references. Public dashboard must never expose GBV information.
  </action>
  <verify>
    <automated>cd frontend-public && npx tsc --noEmit --pretty 2>&1 | head -20</automated>
    Verify no GBV data: grep -c "'gbv'" frontend-public/src/data/mockDashboardData.ts should return 0
    Verify 5 municipalities: grep -c "id:" frontend-public/src/data/mockDashboardData.ts in mockMunicipalities section
  </verify>
  <done>
    - mockDashboardData.ts has 5 municipalities (eThekwini, Mangaung, Buffalo City, Nelson Mandela Bay, Johannesburg)
    - mockSystemSummary shows total_municipalities: 5, total_tickets: 3247+
    - mockResponseTimes has 5 entries with realistic response hours
    - mockResolutionRates has 5 entries with 6-month improvement trend each
    - mockHeatmapData has 35+ points across all 5 municipalities with real GPS coordinates
    - mockCategoryBreakdown uses correct category keys matching CATEGORY_CONFIG
    - ZERO references to 'gbv' or sensitive data (TRNS-05)
    - TypeScript compilation passes
  </done>
</task>

<task type="auto">
  <name>Task 2: Create mockCitizenTickets.ts and wire into Citizen Portal demo mode</name>
  <files>
    frontend-public/src/data/mockCitizenTickets.ts
    frontend-public/src/hooks/useCitizenReports.ts
    frontend-public/src/pages/LandingPage.tsx
    frontend-public/src/pages/AboutPage.tsx
    frontend-public/src/pages/ProfilePage.tsx
  </files>
  <action>
**Create `frontend-public/src/data/mockCitizenTickets.ts`** — Export `DEMO_TICKETS: CitizenTicket[]` and `DEMO_STATS: CitizenStats`. Import `CitizenTicket` and `CitizenStats` types from `'../hooks/useCitizenReports'`.

Use relative timestamp helper:
```typescript
const now = Date.now();
const daysAgo = (days: number, hoursOffset = 0) =>
  new Date(now - days * 86400000 - hoursOffset * 3600000).toISOString();
```

**DEMO_TICKETS** — 5 SA-authentic citizen tickets showing full lifecycle:
1. **Resolved ticket (oldest)**: tracking_number: `'TKT-20260221-ETH001'`, category: `'water'`, status: `'resolved'`, created_at: `daysAgo(6)`, address: `'14 Mashu Rd, Ward 12, KwaMashu, eThekwini'`, severity: `'high'`, assigned_to_name: `'Bongani Nkosi'`, assigned_team_name: `'Water & Sanitation Team'`, media_count: 2, is_sensitive: false, description: "Amanzi awekho eWard 12 kusukela izolo" (add this only if CitizenTicket interface supports it — check first, if not, omit)

2. **In-progress ticket**: tracking_number: `'TKT-20260224-ETH002'`, category: `'roads'`, status: `'in_progress'`, created_at: `daysAgo(3)`, address: `'cnr Mandela Dr & Sisulu Rd, Ward 15, eThekwini'`, severity: `'medium'`, assigned_to_name: `'Johan du Plessis'`, assigned_team_name: `'Roads & Infrastructure'`, media_count: 3, is_sensitive: false

3. **Open ticket (recent)**: tracking_number: `'TKT-20260226-ETH003'`, category: `'electricity'`, status: `'open'`, created_at: `daysAgo(1, 4)`, address: `'22 Umgeni Rd, Ward 28, Durban North'`, severity: `'high'`, assigned_to_name: null, assigned_team_name: `'Electricity Services'`, media_count: 1, is_sensitive: false

4. **Closed ticket**: tracking_number: `'TKT-20260218-ETH004'`, category: `'waste'`, status: `'closed'`, created_at: `daysAgo(9)`, address: `'Inanda Highway near Amaoti, Ward 53'`, severity: `'low'`, assigned_to_name: `'Sipho Ndlovu'`, assigned_team_name: `'Waste Management'`, media_count: 0, is_sensitive: false

5. **GBV sensitive ticket (shows SAPS handling in citizen's view)**: tracking_number: `'TKT-20260225-SAP001'`, status: `'in_progress'`, is_sensitive: true, assigned_officer_name: `'Capt. N. Mthembu'`, station_name: `'Inanda SAPS'`, station_phone: `'031-519-1300'`
   - Note: GBV tickets in the citizen's OWN view is correct per SEC-05 — citizens can see their own cases. The firewall prevents OTHER users/public from seeing them.

**DEMO_STATS** — Realistic citizen personal analytics:
```typescript
export const DEMO_STATS: CitizenStats = {
  total_reports: 5,
  resolved_count: 2,
  avg_resolution_days: 3.4,
  municipality_avg_resolution_days: 4.1,
};
```

**Update `useCitizenReports.ts`:**
1. Remove the inline `DEMO_TICKETS` and `DEMO_STATS` constants (lines ~43-83)
2. Add import at top: `import { DEMO_TICKETS, DEMO_STATS } from '../data/mockCitizenTickets';`
3. The rest of the hook logic stays identical — it already uses `DEMO_TICKETS` and `DEMO_STATS` in the `!session` branch

**Update pages if needed:**
- Check `LandingPage.tsx`, `AboutPage.tsx`, `ProfilePage.tsx` for any inline mock data or empty states that should show richer content. If these pages pull from hooks that are already enriched (via mockDashboardData.ts), no changes needed. Only modify if there's inline placeholder data (like "Demo City" or generic stats) that should be updated to SA-authentic data.
- For `ProfilePage.tsx`: If it shows citizen stats, those come from `useCitizenReports` which now uses enriched DEMO_STATS — no change needed.
- For `LandingPage.tsx`: If it shows system summary stats (total municipalities, total tickets), those come from `useSystemSummary` which falls back to updated `mockSystemSummary` — no change needed.
- Only modify these files if you find inline hardcoded placeholder data that doesn't come from hooks.

**Build and verify:**
After all changes, run `cd frontend-public && npm run build:check` to confirm zero TypeScript errors.
  </action>
  <verify>
    <automated>cd frontend-public && npm run build:check 2>&1 | tail -5</automated>
    Verify DEMO_TICKETS moved: grep -c "DEMO_TICKETS" frontend-public/src/data/mockCitizenTickets.ts should return > 0
    Verify import in hook: grep "from.*data/mockCitizenTickets" frontend-public/src/hooks/useCitizenReports.ts
  </verify>
  <done>
    - mockCitizenTickets.ts exists with 5 SA-authentic demo tickets and enriched stats
    - useCitizenReports.ts imports from mockCitizenTickets.ts (inline constants removed)
    - Demo tickets use culturally authentic SA names, real eThekwini addresses, relative timestamps
    - Citizen Portal demo mode shows full ticket lifecycle (open, in_progress, resolved, closed, GBV)
    - mockDashboardData.ts already enriched in Task 1 — public stats hooks use richer data
    - TypeScript build passes with zero errors: `npm run build:check`
    - No changes to component interfaces — data flows through existing state variables
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation: `cd frontend-public && npm run build:check` passes with zero errors
2. Municipality count: mockDashboardData.ts contains 5 Municipality entries (not 2)
3. System summary: mockSystemSummary.total_municipalities === 5
4. TRNS-05 compliance: `grep -c "'gbv'" frontend-public/src/data/mockDashboardData.ts` returns 0
5. Demo tickets moved: `grep -c "DEMO_TICKETS" frontend-public/src/data/mockCitizenTickets.ts` returns > 0
6. Inline constants removed: No `const DEMO_TICKETS` definition in useCitizenReports.ts
7. Import wired: `grep "from.*data/mockCitizenTickets" frontend-public/src/hooks/useCitizenReports.ts` matches
8. Resolution trends show improvement: Each municipality's trend array has ascending rate values
</verification>

<success_criteria>
- Public transparency dashboard shows 5 real SA municipalities with realistic performance data
- Landing page reflects enriched system summary (5 municipalities, 3000+ tickets)
- Citizen Portal demo mode shows 5 SA-authentic tickets with full lifecycle (open/in_progress/resolved/closed/GBV)
- Resolution rate trends show clear improvement arc (positive trajectory) across all municipalities
- Heatmap data covers all 5 municipalities with 35+ geographic points
- TRNS-05 maintained: zero GBV/sensitive data references in public mock data
- Zero TypeScript compilation errors
</success_criteria>

<output>
After completion, create `.planning/phases/10.4-rich-mocks-implementation-for-public-and-municipal-dashboards/10.4-02-SUMMARY.md`
</output>
