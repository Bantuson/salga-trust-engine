---
phase: 06.5-public-dashboard-ui-refinements
plan: 02
type: execute
wave: 2
depends_on: ["06.5-01"]
files_modified:
  - frontend-public/src/pages/TransparencyDashboardPage.tsx
  - frontend-public/src/pages/AboutPage.tsx
  - frontend-public/src/pages/CitizenLoginPage.tsx
  - frontend-public/src/pages/CitizenPortalPage.tsx
  - frontend-public/src/components/auth/ProtectedRoute.tsx
  - frontend-public/src/App.tsx
  - frontend-public/src/App.css
  - frontend-public/src/components/layout/PublicHeader.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard title 'Municipal Transparency Dashboard' uses gradient text matching 'For Every Citizen.' hero styling"
    - "Dashboard stats cards use pink gloss (variant=elevated) instead of white gloss"
    - "Dashboard mobile heatmap categories are properly structured and readable"
    - "About page cards all use pink gloss background instead of white"
    - "About page How It Works card has no emojis, uses SVG icons instead"
    - "About page FAQ arrow markers are yellow (gold accent color)"
    - "About page check marks (For Citizens, For Municipalities) use teal color"
    - "Citizen login page tagline customized per navigation source"
    - "Login link button colors are yellow (gold) instead of green (teal)"
    - "Login tagline positioned closer to top card border"
    - "Profile page redirects to /profile not /my-reports after auth"
    - "Nav links to My Reports route changed to /profile"
  artifacts:
    - path: "frontend-public/src/pages/TransparencyDashboardPage.tsx"
      provides: "Gradient dashboard title, elevated stats cards"
    - path: "frontend-public/src/pages/AboutPage.tsx"
      provides: "Pink gloss cards, SVG icons replacing emojis, yellow FAQ arrows"
    - path: "frontend-public/src/pages/CitizenLoginPage.tsx"
      provides: "Context-aware login tagline, yellow link buttons"
    - path: "frontend-public/src/App.tsx"
      provides: "Updated routing to /profile"
  key_links:
    - from: "ProtectedRoute.tsx"
      to: "CitizenLoginPage.tsx"
      via: "Navigate with location state including source context"
      pattern: "state.*from.*pathname"
    - from: "CitizenLoginPage.tsx"
      to: "location.state"
      via: "Read source path to determine tagline"
      pattern: "location.*state.*from"
---

<objective>
Restyle dashboard page title and stats cards, update about page cards to pink gloss with SVG icons and yellow FAQ arrows, customize citizen login page tagline per navigation source with yellow link colors, update profile routing.

Purpose: Complete visual consistency across public portal pages — dashboard gradient title, about page professional styling, context-aware login experience, and correct profile routing.
Output: Polished dashboard, about, and login pages with consistent pink gloss theme and context-aware UX.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/06.5-public-dashboard-ui-refinements/06.5-01-SUMMARY.md
@frontend-public/src/pages/TransparencyDashboardPage.tsx
@frontend-public/src/pages/AboutPage.tsx
@frontend-public/src/pages/CitizenLoginPage.tsx
@frontend-public/src/pages/CitizenPortalPage.tsx
@frontend-public/src/components/auth/ProtectedRoute.tsx
@frontend-public/src/App.tsx
@frontend-public/src/App.css
@shared/design-tokens.css
@shared/components/ui/GlassCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dashboard + About page visual refinements</name>
  <files>
    frontend-public/src/pages/TransparencyDashboardPage.tsx
    frontend-public/src/pages/AboutPage.tsx
    frontend-public/src/App.css
  </files>
  <action>
**TransparencyDashboardPage.tsx — Dashboard title gradient:**
1. Apply the same gradient text styling as "For Every Citizen." to the dashboard title.
   Add `className="text-coral"` to the title text or wrap it in a span:
   ```tsx
   <h1 className="dashboard-title">
     <span className="text-coral">Municipal Transparency Dashboard</span>
   </h1>
   ```
   The `.text-coral` class already has the gradient from gold to teal defined in App.css.

**TransparencyDashboardPage.tsx — Stats cards pink gloss:**
2. Change all three `<GlassCard variant="default">` in the `dashboard-summary-grid` to `variant="elevated"`.
   This changes their background from `var(--glass-white-frost)` (white) to `var(--glass-pink-frost)` (pink).

**TransparencyDashboardPage.tsx — Heatmap mobile styling:**
3. No component change needed. Add CSS in App.css for mobile heatmap categories:
   ```css
   @media (max-width: 767px) {
     .category-pill {
       font-size: 0.75rem;
       padding: 0.25rem 0.5rem;
     }
   }
   ```
   Also add a container rule to ensure the category pills wrap cleanly on mobile (check if there's a container). Look at HeatmapViewer.tsx — the categories are rendered as buttons/pills. Add flex-wrap to their container:
   ```css
   /* Heatmap category pills container — mobile wrapping */
   @media (max-width: 767px) {
     .heatmap-categories {
       display: flex;
       flex-wrap: wrap;
       gap: var(--space-sm);
       justify-content: center;
     }
   }
   ```
   If the container class name differs, use the actual class from HeatmapViewer.tsx. The categories container uses inline styles — add a CSS class `heatmap-filter-categories` and apply `flex-wrap: wrap; gap: 0.5rem; justify-content: center;` at mobile breakpoint. NOTE: Check HeatmapViewer.tsx for the actual container — it likely uses inline styles. If so, add a `className` to the categories container div and style via CSS.

**AboutPage.tsx — All cards to pink gloss:**
1. Change ALL `<GlassCard variant="default">` to `variant="elevated"` in AboutPage.tsx. This includes:
   - "What is SALGA Trust Engine?" card
   - "How It Works" card
   - "For Citizens" card
   - "For Municipalities" card
   - "Frequently Asked Questions" card

**AboutPage.tsx — Remove emojis from How It Works:**
2. Replace emoji step icons with inline SVG icons. Remove the step-icon divs with emojis and replace:
   - Step 1 (was phone emoji): Use a smartphone SVG icon:
     ```tsx
     <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent-gold)" strokeWidth="2">
       <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
       <line x1="12" y1="18" x2="12" y2="18"></line>
     </svg>
     ```
   - Step 2 (was eye emoji): Use an eye SVG icon:
     ```tsx
     <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent-gold)" strokeWidth="2">
       <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
       <circle cx="12" cy="12" r="3"></circle>
     </svg>
     ```
   - Step 3 (was checkmark emoji): Use a checkmark circle SVG icon:
     ```tsx
     <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--color-accent-gold)" strokeWidth="2">
       <circle cx="12" cy="12" r="10"></circle>
       <path d="M9 12l2 2 4-4"></path>
     </svg>
     ```

**App.css — FAQ arrow markers to yellow:**
3. The FAQ uses `<details>` with `<summary>`. The arrow/marker is the browser default disclosure triangle. Style it yellow:
   ```css
   .faq-question::marker {
     color: var(--color-accent-gold);
   }
   /* Webkit fallback */
   .faq-question::-webkit-details-marker {
     color: var(--color-accent-gold);
   }
   ```

**App.css — About page check marks already use teal:**
4. The `.about-content li::before` already uses `color: var(--color-teal)`. This is correct per the user's request to match the public dashboard/about page/For Citizens card check marks. No change needed for about page check marks. (The municipal dashboard check marks need to match this — handled in Plan 03.)
  </action>
  <verify>
1. `cd frontend-public && npx tsc --noEmit` — no TypeScript errors
2. `cd frontend-public && npm run build` — builds successfully
3. Check TransparencyDashboardPage uses text-coral class on title and variant="elevated" on stats cards
4. Check AboutPage uses variant="elevated" on all 5 GlassCards
5. Check AboutPage step icons are SVG, no emojis
6. Check FAQ marker CSS targets ::marker with gold color
  </verify>
  <done>
Dashboard title uses gradient text matching hero. Stats cards use pink gloss. About page cards all use pink gloss. How It Works uses SVG icons (no emojis). FAQ arrows are yellow. Check marks use teal.
  </done>
</task>

<task type="auto">
  <name>Task 2: Context-aware login taglines, yellow links, profile routing</name>
  <files>
    frontend-public/src/pages/CitizenLoginPage.tsx
    frontend-public/src/components/auth/ProtectedRoute.tsx
    frontend-public/src/App.tsx
    frontend-public/src/App.css
    frontend-public/src/components/layout/PublicHeader.tsx
  </files>
  <action>
**CitizenLoginPage.tsx — Context-aware tagline:**
1. Read the source path from `location.state?.from?.pathname` to determine the context-specific tagline:
   ```tsx
   const getTagline = () => {
     const fromPath = location.state?.from?.pathname;
     if (fromPath === '/profile' || fromPath === '/my-reports') {
       return 'Sign in to access your profile';
     }
     if (fromPath === '/dashboard') {
       return 'Sign in to access your dashboard';
     }
     return 'Sign in to track your reports'; // default (e.g., from /report)
   };
   ```
2. Replace the hardcoded `<p style={styles.tagline}>Sign in to track your reports</p>` with:
   ```tsx
   <p style={styles.tagline}>{getTagline()}</p>
   ```

**CitizenLoginPage.tsx — Yellow link buttons:**
3. Change `linkButton` style `color` from `'var(--color-teal)'` to `'var(--color-accent-gold)'`.
   This affects "Sign in with Phone OTP", "Register", and "Back to email login" links.

**CitizenLoginPage.tsx — Title position closer to top:**
4. In the `logoSection` style, reduce `marginBottom` from `'1.25rem'` to `'0.75rem'`.
5. In the `card` style, reduce top padding: change `padding` from `'1.75rem 2rem'` to `'1.25rem 2rem 1.75rem 2rem'` to bring the title closer to the card's top edge.

**CitizenLoginPage.tsx — "Send OTP" card title positioning:**
6. The phone OTP form and verify-otp form share the same card. The title is in the `logoSection` which persists across mode changes. The `logoSection` marginBottom reduction in step 4 already handles this. Verify the tagline is also visible in phone mode by checking the existing render structure — the `logoSection` renders regardless of mode, which is correct.

**App.tsx — Profile route updates:**
7. Change the `/my-reports` route path to `/profile`:
   ```tsx
   <Route path="/profile" element={
     <ProtectedRoute><CitizenPortalPage /></ProtectedRoute>
   } />
   ```
   Keep the `/my-reports` as a redirect to `/profile`:
   ```tsx
   <Route path="/my-reports" element={<Navigate to="/profile" replace />} />
   ```

**CitizenLoginPage.tsx — Update default redirect:**
8. Change the default returnUrl from `'/my-reports'` to `'/profile'` in both email login handler and OTP verify handler.

**PublicHeader.tsx — Update nav link:**
9. In Plan 01, the label was changed to 'Profile'. Now also change the `to` property from `'/my-reports'` to `'/profile'` in the navLinks array:
   ```tsx
   { to: '/profile', label: 'Profile' },
   ```
10. Update the dropdown link from `/my-reports` to `/profile` as well (in the desktop user dropdown).

**ProtectedRoute.tsx — No structural changes needed.** The existing implementation already passes `location` state with `from` property, which CitizenLoginPage reads. No changes required.

**App.css — No additional CSS needed for this task.**
  </action>
  <verify>
1. `cd frontend-public && npx tsc --noEmit` — no TypeScript errors
2. `cd frontend-public && npm run build` — builds successfully
3. Check CitizenLoginPage has getTagline function with path-based logic
4. Check linkButton color uses var(--color-accent-gold) not var(--color-teal)
5. Check App.tsx has /profile route and /my-reports redirect
6. Check CitizenLoginPage default returnUrl is /profile
7. Check PublicHeader navLink to is /profile
  </verify>
  <done>
Login tagline changes based on navigation source (profile, dashboard, or default report). Link button colors are yellow/gold. Title positioned closer to card top. Profile routing replaces my-reports routing. All nav links point to /profile.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend-public && npm run build` — zero errors
2. Dashboard title has gradient text
3. Dashboard stats cards use pink gloss
4. About page cards all use pink gloss
5. About page has SVG icons (no emojis) in How It Works
6. FAQ arrows are yellow
7. Login tagline changes based on source page
8. Login link buttons are yellow
9. Login title closer to card top
10. /my-reports redirects to /profile
11. Nav shows "Profile" linking to /profile
</verification>

<success_criteria>
- Both tasks complete without TypeScript or build errors
- All 12 must-have truths are verifiable in the browser
- No existing functionality broken (auth flow, navigation, animations)
</success_criteria>

<output>
After completion, create `.planning/phases/06.5-public-dashboard-ui-refinements/06.5-02-SUMMARY.md`
</output>
