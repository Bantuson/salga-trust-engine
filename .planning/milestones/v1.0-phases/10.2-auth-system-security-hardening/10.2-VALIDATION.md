---
phase: 10.2
slug: auth-system-security-hardening
status: draft
nyquist_compliant: false
wave_0_complete: false
created: 2026-02-25
---

# Phase 10.2 — Validation Strategy

> Generated by `gsd-phase-researcher` during `/gsd:plan-phase 10.2`.
> Updated by `gsd-plan-checker` after plan approval.
> Governs feedback sampling during `/gsd:execute-phase 10.2`.

---

## Test Infrastructure

| Property | Value |
|----------|-------|
| **Framework** | pytest 8.3.0 + pytest-asyncio 0.24.0 |
| **Config file** | `pyproject.toml` — `[tool.pytest.ini_options]` |
| **Quick run command** | `pytest tests/test_security_unit.py tests/test_auth.py -q` |
| **Full suite command** | `pytest tests/ -q` |
| **Estimated runtime** | ~5-10 seconds (unit tests only) |
| **CI pipeline** | None — local pytest only |

---

## Nyquist Sampling Rate

> The minimum feedback frequency required to reliably catch errors in this phase.

- **After every task commit:** Run `pytest tests/test_security_unit.py -q`
- **After every plan wave:** Run `pytest tests/ -q`
- **Before `/gsd:verify-work`:** Full suite must be green
- **Maximum acceptable task feedback latency:** 10 seconds

---

## Per-Task Verification Map

| Task ID | Plan | Wave | Requirement | Test Type | Automated Command | File Exists | Status |
|---------|------|------|-------------|-----------|-------------------|-------------|--------|
| 10.2-01-01 | 01 | 1 | SEC-06, SEC-08 | unit | `pytest tests/test_security_unit.py -k test_password -x` | ❌ W0 | ⬜ pending |
| 10.2-01-02 | 01 | 1 | SEC-07 | unit | `pytest tests/test_security_unit.py -k test_auth_event -x` | ❌ W0 | ⬜ pending |
| 10.2-01-03 | 01 | 1 | SEC-06, SEC-07, SEC-08 | unit | `pytest tests/test_security_unit.py -x` | ❌ W0 | ⬜ pending |
| 10.2-02-01 | 02 | 1 | SEC-01, SEC-08 | build | `npm run build:check` (both frontends) | ✅ N/A | ⬜ pending |
| 10.2-02-02 | 02 | 1 | SEC-01, SEC-02, SEC-04 | manual | Supabase Dashboard inspection | N/A — human | ⬜ pending |

*Status values: ⬜ pending · ✅ green · ❌ red · ⚠️ flaky*

---

## Wave 0 Requirements

> Test scaffolding committed BEFORE any implementation task. Executor runs Wave 0 first.

- [ ] `tests/test_security_unit.py` — add `TestPasswordValidation` class (min length 12, complexity: uppercase/lowercase/digit, rejection below threshold). File EXISTS — add new class.
- [ ] `tests/test_security_unit.py` — add `TestAuthEventLogging` class (login success, login failure, OTP send, POPIA-safe domain-only logging). Add to existing file.

*(No new test files needed — all new tests fit in `tests/test_security_unit.py`)*

---

## Manual-Only Verifications

> Behaviors that genuinely cannot be automated, with justification.
> These are surfaced during `/gsd:verify-work` UAT.

| Behavior | Requirement | Why Manual | Test Instructions |
|----------|-------------|------------|-------------------|
| Supabase Dashboard OTP expiry set to 600s | SEC-01 | Third-party dashboard config | Navigate to Auth > Settings > verify OTP expiry value |
| Supabase Dashboard password policy enforced | SEC-08 | Third-party dashboard config | Attempt registration with weak password via Supabase UI |
| Supabase Dashboard session limits configured | SEC-04 | Third-party dashboard config | Check Auth > Settings > session timeouts |

---

## Validation Sign-Off

Updated by `gsd-plan-checker` when plans are approved:

- [x] All tasks have `<automated>` verify commands or Wave 0 dependencies
- [x] No 3 consecutive implementation tasks without automated verify (sampling continuity)
- [x] Wave 0 test files cover all MISSING references
- [x] No watch-mode flags in any automated command
- [x] Feedback latency per task: < 10s ✅
- [ ] `nyquist_compliant: true` set in frontmatter

**Plan-checker approval:** approved on 2026-02-25

---

## Execution Tracking

Updated during `/gsd:execute-phase 10.2`:

| Wave | Tasks | Tests Run | Pass | Fail | Sampling Status |
|------|-------|-----------|------|------|-----------------|
| 0 | 2 | — | — | — | scaffold |
| 1 | 5 | `pytest tests/test_security_unit.py -q` | — | — | ⬜ pending |

**Phase validation complete:** pending
