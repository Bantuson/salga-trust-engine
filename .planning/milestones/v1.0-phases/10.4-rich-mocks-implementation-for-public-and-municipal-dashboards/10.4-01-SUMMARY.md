---
phase: 10.4-rich-mocks-implementation-for-public-and-municipal-dashboards
plan: 01
subsystem: frontend-dashboard
tags: [mocks, fallback-data, sec-05, sa-authentic, trilingual, municipal-dashboard]
dependency_graph:
  requires: []
  provides:
    - frontend-dashboard/src/mocks/* (7 mock data files)
    - mock fallback in useTeams, useAnalytics, useSettings hooks
    - mock fallback in DashboardPage, TicketListPage, FieldWorkerTicketsPage, CompletedTicketsPage, SAPSReportsPage
  affects:
    - All municipal dashboard pages (now show data when API is down)
tech_stack:
  added: []
  patterns:
    - Catch-block mock fallback: API error → inject mock data, setError(null)
    - SEC-05 GBV isolation: mockSAPSCases.ts strictly separated from mockTickets.ts
    - Relative timestamps: daysAgo() helper computed at module load time
key_files:
  created:
    - frontend-dashboard/src/mocks/index.ts
    - frontend-dashboard/src/mocks/mockUsers.ts
    - frontend-dashboard/src/mocks/mockTickets.ts
    - frontend-dashboard/src/mocks/mockTeams.ts
    - frontend-dashboard/src/mocks/mockAnalytics.ts
    - frontend-dashboard/src/mocks/mockSettings.ts
    - frontend-dashboard/src/mocks/mockSAPSCases.ts
  modified:
    - frontend-dashboard/src/hooks/useTeams.ts
    - frontend-dashboard/src/hooks/useAnalytics.ts
    - frontend-dashboard/src/hooks/useSettings.ts
    - frontend-dashboard/src/pages/DashboardPage.tsx
    - frontend-dashboard/src/pages/TicketListPage.tsx
    - frontend-dashboard/src/pages/FieldWorkerTicketsPage.tsx
    - frontend-dashboard/src/pages/CompletedTicketsPage.tsx
    - frontend-dashboard/src/pages/SAPSReportsPage.tsx
decisions:
  - "SEC-05 GBV firewall mirrored in mock data: mockTickets.ts has zero is_sensitive:true entries, mockSAPSCases.ts has all is_sensitive:true entries with category:gbv"
  - "Apostrophe in Afrikaans description ('n) required switching from single to double quotes for that string literal"
  - "Pre-existing TypeScript errors in shared/ and onboarding/ components are out of scope — only mocks/hooks/pages files are clean"
metrics:
  duration: 10 minutes
  completed: 2026-02-27
  tasks_completed: 2
  files_created: 7
  files_modified: 8
---

# Phase 10.4 Plan 01: Rich Mock Data for Municipal Dashboard Summary

**One-liner:** 7 SA-authentic mock data files with eThekwini personas and trilingual descriptions, wired as catch-block fallbacks in all 5 municipal dashboard pages and 3 hooks, SEC-05 GBV firewall maintained throughout.

## Tasks Completed

| Task | Description | Commit | Status |
|------|-------------|--------|--------|
| 1 | Create all municipal dashboard mock data files | f538a25 | Done |
| 2 | Wire mock data fallbacks into hooks and pages | 59ea7bc | Done |

## What Was Built

### Mock Data Layer (7 files)

**mockUsers.ts** — 39 SA-authentic user profiles across all 6 roles: 18 citizens (Zulu, Afrikaans, English names), 4 managers, 2 admins, 8 field workers, 3 SAPS liaisons (including Colonel Nozipho Bhengu), 4 ward councillors. Email addresses use `@ethekwini.gov.za`, `@saps.gov.za`, and public domains.

**mockTickets.ts** — 24 general service tickets (SEC-05: all `is_sensitive: false`, no `category: 'gbv'`). Status distribution: 4 open, 5 in_progress, 1 escalated, 12 resolved, 2 closed. Languages: ~70% English, ~15% isiZulu, ~15% Afrikaans. Includes SA-authentic addresses with ward numbers, relative timestamps via `daysAgo()` helper.

**mockSAPSCases.ts** — 7 GBV cases (SEC-05: all `is_sensitive: true`, all `category: 'gbv'`). Sensitively worded non-graphic descriptions in English, isiZulu, Afrikaans. Assigned to SAPS Liaison Unit and `saps_liaison`-role users.

**mockTeams.ts** — 6 teams matching CATEGORY_CONFIG: Water & Sanitation, Electricity Services, Roads & Infrastructure, Waste Management, General Services, SAPS Liaison Unit (is_saps: true). Includes `mockTeamMembers` record with 2-4 members per team.

**mockAnalytics.ts** — Exports `mockAnalyticsData`, `mockDashboardMetrics`, `mockVolumeData`, `mockSLAData`, `mockWorkloadData`, `mockKPIMetrics`. KPI sparklines show 7-point improvement arc (resolution going up, response time going down, SLA compliance climbing from 74% to 87%).

**mockSettings.ts** — 7 SLA configs (water: 4h/48h, electricity: 2h/24h, roads: 8h/72h, waste: 4h/48h, sanitation: 4h/48h, other: 8h/72h, default: 4h/48h) plus eThekwini Metropolitan Municipality profile.

**index.ts** — Central re-export with SEC-05 comments clarifying import restrictions.

### Mock Fallback Wiring (8 files)

Pattern applied consistently: `catch (err) { setData(mockData); setError(null); }` — API errors are suppressed and replaced with convincing mock data.

- **useTeams**: fallback + empty-result guard
- **useAnalytics**: fallback to full mockAnalyticsData
- **useSettings**: fallback to SLA configs + municipality profile
- **DashboardPage**: fallback to metrics/volume/SLA/workload + sets lastUpdated
- **TicketListPage**: fallback triggers only after MAX_RETRIES exhausted
- **FieldWorkerTicketsPage**: filters mockTickets to open/in_progress/escalated
- **CompletedTicketsPage**: filters mockTickets to resolved/closed
- **SAPSReportsPage**: uses ONLY mockSAPSTickets from mockSAPSCases (SEC-05)

## Verification Results

| Check | Result |
|-------|--------|
| TypeScript errors in mocks/hooks/pages | 0 |
| `is_sensitive: true` in mockTickets.ts | 0 (SEC-05 pass) |
| `is_sensitive: true` in mockSAPSCases.ts | 9 lines / 7 entries (SEC-05 pass) |
| `category: 'gbv'` in mockTickets.ts | 0 (SEC-05 pass) |
| mockSAPSCases imports in SAPSReportsPage | confirmed |
| Total mock tickets (general) | 24 (within 20-25 range) |
| Total SAPS cases | 7 (within 5-8 range) |
| Total mock users | 39 (within 30-40 range) |

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 1 - Bug] Afrikaans apostrophe in string literal caused TypeScript parse error**
- **Found during:** Task 2 (first build:check run)
- **Issue:** `'Waterdruk is baie laag... Ons kry net 'n druppel...'` — single quote inside single-quoted string caused `TS1005: ',' expected` parse error at mockTickets.ts line 353
- **Fix:** Changed string delimiter from single quotes to double quotes for that specific string
- **Files modified:** frontend-dashboard/src/mocks/mockTickets.ts (line 353)
- **Commit:** 59ea7bc (fix applied before commit)

## Self-Check

Files created:
- frontend-dashboard/src/mocks/index.ts — FOUND
- frontend-dashboard/src/mocks/mockUsers.ts — FOUND
- frontend-dashboard/src/mocks/mockTickets.ts — FOUND
- frontend-dashboard/src/mocks/mockTeams.ts — FOUND
- frontend-dashboard/src/mocks/mockAnalytics.ts — FOUND
- frontend-dashboard/src/mocks/mockSettings.ts — FOUND
- frontend-dashboard/src/mocks/mockSAPSCases.ts — FOUND

Commits:
- f538a25 — FOUND (feat: create rich SA-authentic mock data files)
- 59ea7bc — FOUND (feat: wire mock data fallbacks)

## Self-Check: PASSED
