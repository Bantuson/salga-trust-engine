---
phase: 06.1-postgres-refactor-to-supabase-and-dashboard-separation
plan: 08
type: execute
wave: 5
depends_on: ["06.1-05"]
files_modified:
  - shared/design-tokens.css
  - shared/tokens.ts
  - shared/animations.css
  - frontend-dashboard/package.json
  - frontend-dashboard/src/main.tsx
  - frontend-dashboard/src/App.tsx
  - frontend-dashboard/src/App.css
  - frontend-dashboard/src/providers/LenisProvider.tsx
  - frontend-dashboard/src/components/PageTransition.tsx
  - frontend-dashboard/src/components/AnimatedCard.tsx
  - frontend-dashboard/src/pages/LoginPage.tsx
  - frontend-dashboard/src/components/Globe3DSmall.tsx
  - frontend-dashboard/src/components/GradientMeshBg.tsx
  - frontend-dashboard/src/components/dashboard/MetricsCards.tsx
  - frontend-dashboard/src/components/dashboard/TicketTable.tsx
  - frontend-dashboard/vite.config.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Dark mode with deep navy #0A0E1A background applied to all dashboard pages"
    - "Color palette uses coral #FF6B4A, teal #00D9A6, and navy #0A0E1A across both dashboards"
    - "Lenis smooth scroll wraps the municipal dashboard app"
    - "GSAP page transitions show coral/navy gradient overlay sweep on route change"
    - "Login landing page has glassmorphism card with animated gradient mesh background"
    - "Login landing page has small decorative 3D South Africa globe (react-three-fiber)"
    - "Dashboard cards have glow effects and hover animations"
    - "Staggered animation sequence plays on login page load"
    - "Municipal dashboard is desktop-primary responsive layout"
    - "shared/ design tokens directory exists at repo root with CSS custom properties and TS constants"
  artifacts:
    - path: "shared/design-tokens.css"
      provides: "CSS custom properties for colors, spacing, typography, surfaces, glow effects"
      contains: "--color-navy"
    - path: "shared/tokens.ts"
      provides: "TypeScript constants for colors, typography, animation durations"
      contains: "export const colors"
    - path: "shared/animations.css"
      provides: "Shared keyframe animations (fade-in, slide-up, glow-pulse)"
      contains: "@keyframes"
    - path: "frontend-dashboard/src/providers/LenisProvider.tsx"
      provides: "Lenis smooth scroll provider with GSAP ticker sync"
      contains: "ReactLenis"
    - path: "frontend-dashboard/src/components/PageTransition.tsx"
      provides: "GSAP color overlay sweep transition on route changes"
      contains: "gsap.timeline"
    - path: "frontend-dashboard/src/pages/LoginPage.tsx"
      provides: "Branded login with glassmorphism card, 3D globe, gradient mesh, staggered animations"
      contains: "glassmorphism"
    - path: "frontend-dashboard/src/components/Globe3DSmall.tsx"
      provides: "Small decorative 3D South Africa globe for login page"
      contains: "Canvas"
  key_links:
    - from: "frontend-dashboard/src/App.tsx"
      to: "shared/design-tokens.css"
      via: "CSS import at app root"
      pattern: "import.*shared/design-tokens"
    - from: "frontend-dashboard/src/providers/LenisProvider.tsx"
      to: "gsap"
      via: "GSAP ticker sync with Lenis scroll events"
      pattern: "gsap\\.ticker\\.add"
    - from: "frontend-dashboard/src/components/PageTransition.tsx"
      to: "gsap"
      via: "GSAP timeline for overlay sweep animation"
      pattern: "gsap\\.timeline"
    - from: "frontend-dashboard/src/pages/LoginPage.tsx"
      to: "frontend-dashboard/src/components/Globe3DSmall.tsx"
      via: "React.lazy import for code-split 3D globe"
      pattern: "React\\.lazy"
---

<objective>
Create the shared design token system at repo root and apply the premium UI design layer to the municipal dashboard (frontend-dashboard/). This adds dark mode styling, GSAP page transitions, Lenis smooth scroll, a branded login landing page with 3D globe and glassmorphism, and glow/hover effects to dashboard components.

Purpose: Plans 01-07 build functional dashboards with basic React. This plan adds the premium "Jungle-style" dark mode aesthetic, animation stack (GSAP + Lenis + anime.js + react-three-fiber), and branded login experience per the user's locked design decisions. The shared/ directory establishes design tokens consumed by both dashboard apps.

Output: shared/ design token system, animated municipal dashboard with branded login page, desktop-primary layout with glow effects and smooth transitions.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/06.1-postgres-refactor-to-supabase-and-dashboard-separation/06.1-CONTEXT.md
@.planning/phases/06.1-postgres-refactor-to-supabase-and-dashboard-separation/06.1-UI-RESEARCH.md
@.planning/phases/06.1-postgres-refactor-to-supabase-and-dashboard-separation/06.1-05-SUMMARY.md
@frontend-dashboard/package.json
@frontend-dashboard/src/App.tsx
@frontend-dashboard/src/pages/LoginPage.tsx
@frontend-dashboard/src/components/dashboard/MetricsCards.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared design token system and install animation libraries</name>
  <files>
    shared/design-tokens.css
    shared/tokens.ts
    shared/animations.css
    frontend-dashboard/package.json
    frontend-dashboard/vite.config.ts
  </files>
  <action>
    **Step 1: Create shared/ directory at repo root with design-tokens.css**
    Create `shared/design-tokens.css` with CSS custom properties:
    ```css
    :root {
      /* Core Palette */
      --color-navy: #0A0E1A;
      --color-navy-light: #131829;
      --color-navy-surface: #1A1F3A;
      --color-coral: #FF6B4A;
      --color-coral-hover: #FF8566;
      --color-teal: #00D9A6;
      --color-teal-hover: #00F0B8;
      --color-white: #FFFFFF;

      /* Text */
      --text-primary: #E8E8EC;
      --text-secondary: #9CA3AF;
      --text-muted: #6B7280;

      /* Surfaces (Material Design 3 elevation) */
      --surface-base: #0A0E1A;
      --surface-elevated: rgba(255, 255, 255, 0.05);
      --surface-higher: rgba(255, 255, 255, 0.08);
      --surface-highest: rgba(255, 255, 255, 0.11);

      /* Borders */
      --border-subtle: rgba(255, 255, 255, 0.1);
      --border-hover: rgba(255, 255, 255, 0.2);

      /* Glow Effects */
      --glow-coral: 0 0 20px rgba(255, 107, 74, 0.15), 0 0 60px rgba(255, 107, 74, 0.05);
      --glow-teal: 0 0 20px rgba(0, 217, 166, 0.15), 0 0 60px rgba(0, 217, 166, 0.05);
      --glow-coral-border: rgba(255, 107, 74, 0.2);
      --glow-teal-border: rgba(0, 217, 166, 0.2);

      /* Typography */
      --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-display: 'Clash Display', 'Inter', -apple-system, sans-serif;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;

      /* Radius */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;

      /* Chart Colors */
      --chart-primary: #FF6B4A;
      --chart-secondary: #00D9A6;
      --chart-tertiary: #A78BFA;
      --chart-quaternary: #FBBF24;
      --chart-grid: rgba(255, 255, 255, 0.06);
      --chart-axis-text: #9CA3AF;

      /* Glassmorphism */
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --glass-blur: 20px;

      /* Transitions */
      --transition-fast: 150ms ease;
      --transition-base: 250ms ease;
      --transition-slow: 500ms ease;
    }
    ```

    **Step 2: Create shared/tokens.ts with TypeScript constants**
    ```typescript
    export const colors = {
      navy: '#0A0E1A',
      navyLight: '#131829',
      navySurface: '#1A1F3A',
      coral: '#FF6B4A',
      coralHover: '#FF8566',
      teal: '#00D9A6',
      tealHover: '#00F0B8',
      white: '#FFFFFF',
      textPrimary: '#E8E8EC',
      textSecondary: '#9CA3AF',
      textMuted: '#6B7280',
      surfaceElevated: 'rgba(255,255,255,0.05)',
      surfaceHigher: 'rgba(255,255,255,0.08)',
      surfaceHighest: 'rgba(255,255,255,0.11)',
      border: 'rgba(255,255,255,0.1)',
      borderHover: 'rgba(255,255,255,0.2)',
      chartPrimary: '#FF6B4A',
      chartSecondary: '#00D9A6',
      chartTertiary: '#A78BFA',
      chartQuaternary: '#FBBF24',
    } as const;

    export const typography = {
      fontFamily: "'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
      displayFont: "'Clash Display', 'Inter', -apple-system, sans-serif",
    } as const;

    export const animation = {
      durationFast: 0.15,
      durationBase: 0.25,
      durationSlow: 0.5,
      durationPage: 0.5,
      easeDefault: 'power2.out',
      easeInOut: 'power2.inOut',
      easeBounce: 'back.out(1.7)',
      staggerDefault: 0.1,
    } as const;
    ```

    **Step 3: Create shared/animations.css with shared keyframes**
    ```css
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 74, 0.15); }
      50% { box-shadow: 0 0 30px rgba(255, 107, 74, 0.25); }
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    ```

    **Step 4: Install animation libraries in frontend-dashboard/**
    Run `cd frontend-dashboard && npm install gsap @gsap/react lenis animejs @react-three/fiber @react-three/drei detect-gpu three` and `npm install -D @types/three`.

    **Step 5: Update frontend-dashboard/vite.config.ts**
    Add alias for shared/ directory so imports resolve correctly:
    ```typescript
    import { defineConfig } from 'vite';
    import react from '@vitejs/plugin-react';
    import path from 'path';

    export default defineConfig({
      plugins: [react()],
      resolve: {
        alias: {
          '@shared': path.resolve(__dirname, '../shared'),
        },
      },
    });
    ```
    Also update tsconfig.app.json to include path alias:
    ```json
    {
      "compilerOptions": {
        "paths": {
          "@shared/*": ["../shared/*"]
        }
      },
      "include": ["src", "../shared"]
    }
    ```
  </action>
  <verify>
    - File `shared/design-tokens.css` exists with `--color-navy: #0A0E1A`
    - File `shared/tokens.ts` exists with `export const colors`
    - File `shared/animations.css` exists with `@keyframes`
    - `cd frontend-dashboard && npm ls gsap @gsap/react lenis animejs @react-three/fiber @react-three/drei detect-gpu three` shows all installed
    - `cd frontend-dashboard && npx tsc --noEmit` succeeds with shared/ alias resolving
  </verify>
  <done>
    shared/ design token system created at repo root with CSS custom properties, TypeScript constants, and animation keyframes. All animation libraries installed in frontend-dashboard/. Vite alias configured for @shared/ imports.
  </done>
</task>

<task type="auto">
  <name>Task 2: Apply dark mode, Lenis, page transitions, and premium login page to municipal dashboard</name>
  <files>
    frontend-dashboard/src/main.tsx
    frontend-dashboard/src/App.tsx
    frontend-dashboard/src/App.css
    frontend-dashboard/src/providers/LenisProvider.tsx
    frontend-dashboard/src/components/PageTransition.tsx
    frontend-dashboard/src/components/AnimatedCard.tsx
    frontend-dashboard/src/components/Globe3DSmall.tsx
    frontend-dashboard/src/components/GradientMeshBg.tsx
    frontend-dashboard/src/pages/LoginPage.tsx
    frontend-dashboard/src/components/dashboard/MetricsCards.tsx
    frontend-dashboard/src/components/dashboard/TicketTable.tsx
  </files>
  <action>
    **Step 1: Create LenisProvider.tsx — Smooth scroll provider**
    ```typescript
    // frontend-dashboard/src/providers/LenisProvider.tsx
    import { ReactLenis } from 'lenis/react';
    import { useEffect } from 'react';
    import gsap from 'gsap';
    import { ScrollTrigger } from 'gsap/ScrollTrigger';

    gsap.registerPlugin(ScrollTrigger);

    export function LenisProvider({ children }: { children: React.ReactNode }) {
      useEffect(() => {
        // Sync Lenis with GSAP ticker for ScrollTrigger compatibility
        const lenis = (document.querySelector('[data-lenis-root]') as any)?.__lenis;
        if (lenis) {
          lenis.on('scroll', ScrollTrigger.update);
          gsap.ticker.add((time: number) => lenis.raf(time * 1000));
          gsap.ticker.lagSmoothing(0);
        }
      }, []);

      return (
        <ReactLenis root options={{ lerp: 0.1, duration: 1.2, smoothWheel: true }}>
          {children}
        </ReactLenis>
      );
    }
    ```

    **Step 2: Create PageTransition.tsx — GSAP color overlay sweep**
    Per user decision: GSAP page transitions with coral/navy gradient (NOT Barba.js — research found it conflicts with React SPAs).
    ```typescript
    // frontend-dashboard/src/components/PageTransition.tsx
    import { useRef, useEffect, useState } from 'react';
    import gsap from 'gsap';

    interface PageTransitionProps {
      routeKey: string; // current hash route
      children: React.ReactNode;
    }

    export function PageTransition({ routeKey, children }: PageTransitionProps) {
      const overlayRef = useRef<HTMLDivElement>(null);
      const contentRef = useRef<HTMLDivElement>(null);
      const [displayChildren, setDisplayChildren] = useState(children);
      const isFirstRender = useRef(true);

      useEffect(() => {
        if (isFirstRender.current) {
          isFirstRender.current = false;
          return;
        }

        const tl = gsap.timeline({
          onComplete: () => setDisplayChildren(children),
        });

        // Sweep in from left
        tl.fromTo(overlayRef.current,
          { scaleX: 0, transformOrigin: 'left' },
          { scaleX: 1, duration: 0.5, ease: 'power2.inOut' }
        )
        // Swap content happens at midpoint (onComplete above)
        // Sweep out to right
        .fromTo(overlayRef.current,
          { scaleX: 1, transformOrigin: 'right' },
          { scaleX: 0, duration: 0.5, ease: 'power2.inOut' }
        );
      }, [routeKey]);

      useEffect(() => {
        setDisplayChildren(children);
      }, [children]);

      return (
        <>
          <div
            ref={overlayRef}
            style={{
              position: 'fixed',
              inset: 0,
              zIndex: 9999,
              background: 'linear-gradient(135deg, var(--color-coral), var(--color-navy))',
              transformOrigin: 'left',
              transform: 'scaleX(0)',
              pointerEvents: 'none',
            }}
          />
          <div ref={contentRef}>{displayChildren}</div>
        </>
      );
    }
    ```

    **Step 3: Create AnimatedCard.tsx — Reusable glow card wrapper**
    ```typescript
    // frontend-dashboard/src/components/AnimatedCard.tsx
    import { useRef } from 'react';
    import gsap from 'gsap';
    import { useGSAP } from '@gsap/react';

    gsap.registerPlugin(useGSAP);

    interface AnimatedCardProps {
      children: React.ReactNode;
      glowColor?: 'coral' | 'teal';
      delay?: number;
      className?: string;
    }

    export function AnimatedCard({ children, glowColor = 'coral', delay = 0, className = '' }: AnimatedCardProps) {
      const cardRef = useRef<HTMLDivElement>(null);

      useGSAP(() => {
        gsap.from(cardRef.current, {
          y: 30,
          opacity: 0,
          duration: 0.6,
          delay,
          ease: 'back.out(1.7)',
        });
      }, { scope: cardRef });

      const glowClass = glowColor === 'coral' ? 'card-glow-coral' : 'card-glow-teal';

      return (
        <div ref={cardRef} className={`animated-card ${glowClass} ${className}`}>
          {children}
        </div>
      );
    }
    ```

    **Step 4: Create Globe3DSmall.tsx — Decorative 3D SA globe for login**
    Small, non-interactive globe that slowly rotates. Code-split via React.lazy.
    ```typescript
    // frontend-dashboard/src/components/Globe3DSmall.tsx
    import { useRef } from 'react';
    import { Canvas, useFrame } from '@react-three/fiber';
    import { Sphere, MeshDistortMaterial } from '@react-three/drei';
    import * as THREE from 'three';

    function RotatingGlobe() {
      const meshRef = useRef<THREE.Mesh>(null);
      useFrame((_, delta) => {
        if (meshRef.current) {
          meshRef.current.rotation.y += delta * 0.3;
        }
      });

      return (
        <Sphere ref={meshRef} args={[1.5, 32, 32]}>
          <MeshDistortMaterial
            color="#00D9A6"
            emissive="#0A0E1A"
            emissiveIntensity={0.3}
            roughness={0.4}
            metalness={0.8}
            distort={0.15}
            speed={2}
          />
        </Sphere>
      );
    }

    export default function Globe3DSmall() {
      return (
        <Canvas
          dpr={[1, 2]}
          camera={{ position: [0, 0, 4], fov: 45 }}
          style={{ position: 'absolute', inset: 0, pointerEvents: 'none' }}
        >
          <ambientLight intensity={0.4} />
          <directionalLight position={[5, 5, 5]} intensity={0.8} color="#FF6B4A" />
          <directionalLight position={[-5, -5, -5]} intensity={0.3} color="#00D9A6" />
          <RotatingGlobe />
        </Canvas>
      );
    }
    ```
    NOTE: This is a decorative distorted sphere with teal/coral lighting representing SA abstractly. The full interactive SA GeoJSON globe with municipal boundaries is in Plan 09 (public dashboard). This smaller globe is intentionally simpler to keep the login page fast-loading.

    **Step 5: Create GradientMeshBg.tsx — Animated gradient mesh background**
    ```typescript
    // frontend-dashboard/src/components/GradientMeshBg.tsx
    import { useRef } from 'react';
    import gsap from 'gsap';
    import { useGSAP } from '@gsap/react';

    export function GradientMeshBg() {
      const bgRef = useRef<HTMLDivElement>(null);

      useGSAP(() => {
        gsap.to(bgRef.current, {
          backgroundPosition: '100% 50%',
          duration: 8,
          ease: 'none',
          repeat: -1,
          yoyo: true,
        });
      }, { scope: bgRef });

      return (
        <div
          ref={bgRef}
          style={{
            position: 'fixed',
            inset: 0,
            zIndex: 0,
            background: `
              radial-gradient(ellipse at 20% 50%, rgba(255, 107, 74, 0.15) 0%, transparent 50%),
              radial-gradient(ellipse at 80% 20%, rgba(0, 217, 166, 0.1) 0%, transparent 50%),
              radial-gradient(ellipse at 50% 80%, rgba(167, 139, 250, 0.08) 0%, transparent 50%),
              var(--color-navy)
            `,
            backgroundSize: '200% 200%',
          }}
        />
      );
    }
    ```

    **Step 6: Rewrite LoginPage.tsx — Branded login with 3D globe + glassmorphism**
    Completely restyle the existing LoginPage.tsx:
    - Full-viewport dark background with GradientMeshBg
    - Small 3D globe on left/background (React.lazy + Suspense for code splitting)
    - Glassmorphism login card centered-right:
      - Background: rgba(255,255,255,0.05), backdrop-filter: blur(20px), border: 1px solid rgba(255,255,255,0.1)
      - Border-radius: 24px
    - SALGA Trust Engine logo/text + tagline above form
    - Supabase Auth form fields: email/phone + password, OTP toggle
    - Staggered GSAP animation sequence on load:
      1. Gradient mesh fades in (0.5s)
      2. Globe fades in and begins rotation (0.8s)
      3. Login card slides up with slight bounce ease: back.out(1.7) (1.0s)
      4. Form fields stagger in from bottom (1.2s, stagger: 0.1s)
    - Keep all existing auth logic from Plan 05 (useAuth hook, signInWithEmail, signInWithPhone, verifyOtp)
    - Only change the visual presentation, not the auth functionality

    **Step 7: Restyle App.css — Full dark mode overhaul**
    Replace the entire App.css with dark mode styles using CSS custom properties from shared/:
    - Import: `@import '../../shared/design-tokens.css';` and `@import '../../shared/animations.css';`
    - html, body: background var(--surface-base), color var(--text-primary), font-family var(--font-body)
    - Navigation: background var(--color-navy-light), border-bottom var(--border-subtle)
    - Nav links: color var(--text-secondary), hover: var(--color-coral), active: var(--color-coral)
    - Cards: background var(--surface-elevated), border var(--border-subtle), border-radius var(--radius-md)
    - Card hover state: border-color var(--glow-coral-border), box-shadow var(--glow-coral), transform: translateY(-2px), transition var(--transition-base)
    - Tables: header bg var(--color-navy-light), rows alternate var(--surface-elevated)/transparent, row hover var(--surface-higher)
    - Buttons primary: bg var(--color-coral), hover var(--color-coral-hover)
    - Buttons secondary: bg transparent, border var(--border-subtle), hover border var(--border-hover)
    - Input fields: bg var(--surface-elevated), border var(--border-subtle), focus border var(--color-teal), color var(--text-primary)
    - Glassmorphism utility: .glass { background: var(--glass-bg); backdrop-filter: blur(var(--glass-blur)); border: 1px solid var(--glass-border); }
    - Glow card classes: .card-glow-coral { box-shadow: var(--glow-coral); border: 1px solid var(--glow-coral-border); }
    - Glow card classes: .card-glow-teal { box-shadow: var(--glow-teal); border: 1px solid var(--glow-teal-border); }
    - Animated card class: .animated-card { transition: var(--transition-base); }
    - Scrollbar styling: webkit-scrollbar dark themed

    **Step 8: Update App.tsx — Add LenisProvider and PageTransition**
    Wrap the entire app in LenisProvider. Wrap page content in PageTransition keyed by current hash route.
    ```typescript
    import { LenisProvider } from './providers/LenisProvider';
    import { PageTransition } from './components/PageTransition';
    import '@shared/design-tokens.css';
    import '@shared/animations.css';

    function App() {
      const { session, loading } = useAuth();
      const [currentPage, setCurrentPage] = useState('#dashboard');

      if (loading) return <LoadingSpinner />;
      if (!session) return <LoginPage />;

      return (
        <LenisProvider>
          <div className="App">
            <nav>...</nav>
            <PageTransition routeKey={currentPage}>
              {currentPage === '#dashboard' && <DashboardPage />}
              {currentPage === '#tickets' && <TicketListPage />}
              {currentPage === '#report' && <ReportForm />}
            </PageTransition>
          </div>
        </LenisProvider>
      );
    }
    ```

    **Step 9: Update MetricsCards.tsx — Add glow effects and hover animations**
    Wrap each metric card in AnimatedCard with staggered delays. Use anime.js for counter animations on the metric numbers:
    ```typescript
    import anime from 'animejs';
    import { AnimatedCard } from '../AnimatedCard';

    // On mount, animate numbers counting up
    useEffect(() => {
      anime({
        targets: '.metric-value',
        innerHTML: [0, targetValue],
        round: 1,
        duration: 2000,
        easing: 'easeOutExpo',
      });
    }, [data]);
    ```
    Each card gets alternating coral/teal glow: first card coral, second teal, etc.

    **Step 10: Update TicketTable.tsx — Dark mode table styling**
    Apply dark mode classes to TanStack table:
    - Header row: bg var(--color-navy-light), text var(--text-secondary), uppercase, letter-spacing
    - Body rows: hover bg var(--surface-higher), transition var(--transition-fast)
    - Status badges: use coral for overdue, teal for on-track, amber for at-risk
    - Priority indicators: use colored left-border (coral=high, amber=medium, teal=low)

    **Desktop-primary responsive design:** The municipal dashboard is designed for desktop (per user decision). Set min-width: 1024px on main container, allow horizontal scroll below that. Navigation sidebar pattern (not hamburger menu). Cards in 3-4 column grid on desktop.
  </action>
  <verify>
    - `cd frontend-dashboard && npm run build` succeeds with no errors
    - `cd frontend-dashboard && npx tsc --noEmit` succeeds
    - Grep for "Barba" in frontend-dashboard/ returns 0 matches (must use GSAP, not Barba.js)
    - Grep for "@shared/design-tokens" in App.tsx or App.css confirms token import
    - Grep for "ReactLenis" in LenisProvider.tsx confirms Lenis integration
    - Grep for "gsap.timeline" in PageTransition.tsx confirms GSAP page transitions
    - Grep for "React.lazy" in LoginPage.tsx confirms code-split globe loading
    - Grep for "glassmorphism\|glass-bg\|backdrop-filter" in LoginPage.tsx or App.css confirms glass card
  </verify>
  <done>
    Municipal dashboard fully styled with dark mode (navy #0A0E1A), Lenis smooth scroll, GSAP page transitions (coral/navy overlay sweep), branded login page (glassmorphism card + 3D globe + gradient mesh + staggered animations), glow hover effects on cards, anime.js counter animations, desktop-primary layout. Build succeeds.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend-dashboard && npm run build` succeeds
2. shared/ directory exists with design-tokens.css, tokens.ts, animations.css
3. Dark mode applied: background is #0A0E1A, text is #E8E8EC
4. Lenis smooth scroll wraps the app (ReactLenis in providers/)
5. Page transitions use GSAP timeline with coral/navy gradient (NOT Barba.js)
6. Login page has glassmorphism card + animated gradient mesh + 3D globe
7. Login animation sequence: mesh fade-in -> globe -> card slide-up -> fields stagger
8. Dashboard cards have glow effects (coral/teal) and hover animations
9. Metric numbers use anime.js counter animation
10. Desktop-primary layout (min-width: 1024px)
11. TypeScript compiles with zero errors
</verification>

<success_criteria>
- shared/ design token system exists (CSS + TS + keyframes)
- Dark mode applied to all municipal dashboard pages
- Lenis smooth scroll operational
- GSAP page transitions on route change (coral/navy overlay sweep)
- Branded login: glassmorphism card, gradient mesh, decorative 3D globe, staggered entry animations
- Glow effects and hover animations on dashboard cards
- anime.js counter animations on metric numbers
- Desktop-primary responsive design
- Build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/06.1-postgres-refactor-to-supabase-and-dashboard-separation/06.1-08-SUMMARY.md`
</output>
