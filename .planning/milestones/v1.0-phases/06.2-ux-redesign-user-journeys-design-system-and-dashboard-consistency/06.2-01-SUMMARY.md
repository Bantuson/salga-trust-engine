---
phase: 06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency
plan: 01
subsystem: shared-design-system
tags:
  - design-system
  - ui-components
  - typography
  - accessibility
  - glassmorphism
  - ndebele-patterns
dependency_graph:
  requires: []
  provides:
    - shared-design-tokens
    - shared-ui-components
    - accessibility-hooks
    - cultural-patterns
  affects:
    - frontend-dashboard
    - frontend-public
tech_stack:
  added:
    - react-loading-skeleton
    - class-variance-authority
    - clsx
    - tailwind-merge
  patterns:
    - glassmorphism
    - reduced-motion-detection
    - svg-patterns
    - css-custom-properties
key_files:
  created:
    - shared/lib/utils.ts
    - shared/hooks/useReducedMotion.ts
    - shared/components/ui/GlassCard.tsx
    - shared/components/ui/Button.tsx
    - shared/components/ui/Input.tsx
    - shared/components/ui/Skeleton.tsx
    - shared/components/ui/Badge.tsx
    - shared/components/AnimatedGradientBg.tsx
    - shared/components/NdebelePattern.tsx
  modified:
    - shared/design-tokens.css
    - shared/tokens.ts
    - shared/animations.css
    - frontend-dashboard/package.json
    - frontend-public/package.json
    - .gitignore
decisions:
  - key: typography-fonts
    summary: Space Grotesk for display headings (replaces Clash Display), Inter for body text
    rationale: Space Grotesk is open-source, better rendering at small sizes, wider language support
  - key: cn-utility-no-tailwind
    summary: cn() utility uses clsx only, no tailwind-merge
    rationale: Neither dashboard uses Tailwind CSS - plain CSS with custom properties
  - key: glassmorphism-variants
    summary: GlassCard has 3 variants (default/elevated/interactive) instead of single component
    rationale: Different UI contexts need different glass intensities and interactivity
  - key: ndebele-low-opacity
    summary: Ndebele patterns at 0.05-0.15 opacity (very subtle)
    rationale: Cultural accents should enhance, not dominate; respect minimalist dark mode aesthetic
  - key: gradient-animation-20s
    summary: Animated gradient rotates through 3 schemes on 20s cycle with staggered layers
    rationale: Slow rotation prevents motion sickness, staggered timing creates smooth transitions
  - key: gitignore-shared-lib
    summary: Added !shared/lib/ exception to .gitignore lib/ rule
    rationale: Python's lib/ is build artifact, shared/lib/ is source code - needs tracking
metrics:
  duration: 35.3m (2117s)
  completed_date: 2026-02-11
  tasks_completed: 2
  files_created: 9
  files_modified: 6
  dependencies_added: 4
  commits: 2
---

# Phase 06.2 Plan 01: Shared Design System Foundation Summary

Complete shared design system with Space Grotesk typography, glassmorphism components (GlassCard/Button/Input), animated gradient backgrounds, Ndebele cultural patterns, and accessibility hooks for both dashboards

## What Was Built

Created the complete shared design system foundation that both dashboards (municipal and public) will use for visual consistency. This includes:

**Typography System:**
- Replaced Clash Display with Space Grotesk for display headings (better rendering, open-source)
- Kept Inter for body text
- Added responsive typography scale with clamp() for fluid sizing (h1-h4, base, lg, sm, xs)
- Imported Google Fonts for both typefaces

**Design Tokens:**
- Added gold tertiary accent color (#FBBF24) inspired by Ndebele palette
- Created 3 animated gradient color schemes (navy → blue, navy → purple, navy → teal)
- Extended typography variables with line-height tokens (tight/normal/relaxed)

**Accessibility:**
- Created useReducedMotion hook for prefers-reduced-motion detection
- Added media query block to disable decorative animations for accessibility
- AnimatedGradientBg shows static navy background when reduced motion preferred

**UI Components (7 total):**

1. **GlassCard** - Reusable glassmorphism card with 3 variants:
   - default: Standard glass with blur(16px), rgba(26,31,58,0.6) background
   - elevated: Stronger blur(20px), brighter border for prominence
   - interactive: Hover state with translateY(-2px), optional glow (coral/teal/gold)

2. **Button** - Premium button with 3 variants, 3 sizes, loading state:
   - primary: Coral background with hover glow and scale(1.02)
   - secondary: Teal outline with hover background fill
   - ghost: Transparent with hover background
   - Loading state shows inline spinner

3. **Input** - Dark mode form input:
   - Label + input + error message composition
   - Teal glow on focus, coral border on error
   - Optional icon support with auto-padding

4. **Skeleton** - Dark mode loading skeletons:
   - Base color: rgba(255,255,255,0.05), Highlight: rgba(255,255,255,0.1)
   - Convenience components: SkeletonCard, SkeletonTable, SkeletonText

5. **Badge** - Status badges for 5 ticket states:
   - open (gold), in_progress (teal), escalated (coral), resolved (bright teal), closed (gray)
   - Color-coded backgrounds, borders, and text

6. **AnimatedGradientBg** - Rotating gradient background:
   - 3 absolutely positioned layers with staggered 20s animations
   - Gradient 1 (0s delay), Gradient 2 (6.67s), Gradient 3 (13.34s)
   - Respects prefers-reduced-motion (shows static navy)

7. **NdebelePattern** - SVG geometric patterns for cultural accents:
   - border variant: 8px horizontal repeating strip
   - corner variant: 80x80px top-right ornament
   - background variant: Repeating tile for section backgrounds
   - Very low opacity (0.05-0.15) for subtle enhancement

**Utilities:**
- cn() function using clsx for className merging (no Tailwind since neither app uses it)

**Infrastructure:**
- Installed dependencies in both frontend apps (react-loading-skeleton, class-variance-authority, clsx, tailwind-merge)
- Fixed .gitignore to allow shared/lib/ directory (Python lib/ exclusion was blocking it)

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocker] .gitignore blocking shared/lib/ directory**
- **Found during:** Task 1 - Creating shared/lib/utils.ts
- **Issue:** .gitignore had blanket `lib/` rule for Python build artifacts, preventing shared/lib/ from being tracked
- **Fix:** Added `!shared/lib/` exception to .gitignore
- **Files modified:** .gitignore
- **Commit:** d1700cb
- **Rationale:** shared/lib/ contains source code utilities, not build artifacts - must be version controlled

**2. [Context] Previous execution already created components**
- **Found during:** Task 2 - After creating all components, attempting to commit
- **Context:** Discovered components were already created in commit cf6e06c from previous execution
- **Resolution:** Verified created components match existing committed versions (zero diff), no additional commit needed
- **Impact:** Task 2 was a no-op in terms of git changes, but verified correctness

## Testing & Verification

**TypeScript Compilation:**
- frontend-dashboard: `npx tsc --noEmit` ✅ Zero errors
- frontend-public: `npx tsc --noEmit` ✅ Zero errors

**File Existence:**
- All 9 component files created and tracked by git ✅
- Both utility files (utils.ts, useReducedMotion.ts) exist ✅

**Design Token Verification:**
- Space Grotesk font in design-tokens.css ✅
- Gold color (#FBBF24) added ✅
- Gradient variables (gradient-1/2/3) present ✅
- Typography scale with clamp() added ✅
- Google Fonts import at top of file ✅

**Dependency Verification:**
- react-loading-skeleton in both package.json files ✅
- class-variance-authority in both package.json files ✅
- clsx and tailwind-merge in both package.json files ✅

**Component Verification:**
- GlassCard has variant prop (default/elevated/interactive) ✅
- AnimatedGradientBg imports and uses useReducedMotion ✅
- Button has loading state with spinner ✅
- Skeleton imports react-loading-skeleton/dist/skeleton.css ✅
- Badge has all 5 ticket status variants ✅
- NdebelePattern has 3 SVG variants ✅

## Success Criteria Met

- [x] Shared design system provides all base components needed by Plans 02-07
- [x] Typography uses Space Grotesk (display) + Inter (body)
- [x] Animated gradient rotates through 3 color schemes, not static navy
- [x] Ndebele patterns are subtle (low opacity 0.05-0.15), not overwhelming
- [x] prefers-reduced-motion is respected
- [x] Both apps build successfully with new shared components (TypeScript zero errors)

## Key Links Verified

**From must_haves:**
- GlassCard → design-tokens.css: Uses `var(--radius-xl)` ✅
- AnimatedGradientBg → useReducedMotion: Imports and checks hook ✅
- AnimatedGradientBg → animations.css: Uses `gradientFadeInOut` keyframe ✅
- All components → utils.ts: Import cn() utility ✅

## Impact on Roadmap

**Unblocks:**
- Plan 02: Dashboard layout redesign (can use GlassCard, Button, NdebelePattern)
- Plan 03: Public dashboard redesign (can use AnimatedGradientBg, Skeleton)
- Plan 04: Auth UI redesign (can use GlassCard, Input, Button)
- Plan 05: Ticket list UI (can use Badge, SkeletonTable)
- Plan 06: Form builder UI (can use Input with validation)
- Plan 07: Dashboard consistency sweep (all components available)

**Provides:**
- Consistent glassmorphism aesthetic across both dashboards
- Cultural identity through Ndebele geometric patterns
- Accessibility through reduced motion support
- Professional UI polish through micro-interactions
- Single source of truth for design tokens

## Self-Check

**Files Created:**
- ✅ shared/lib/utils.ts (exists)
- ✅ shared/hooks/useReducedMotion.ts (exists)
- ✅ shared/components/ui/GlassCard.tsx (exists)
- ✅ shared/components/ui/Button.tsx (exists)
- ✅ shared/components/ui/Input.tsx (exists)
- ✅ shared/components/ui/Skeleton.tsx (exists)
- ✅ shared/components/ui/Badge.tsx (exists)
- ✅ shared/components/AnimatedGradientBg.tsx (exists)
- ✅ shared/components/NdebelePattern.tsx (exists)

**Commits Verified:**
- ✅ d1700cb: feat(06.2-01): install dependencies and update design tokens
- ✅ cf6e06c: feat(06.2-08): add API endpoints for access requests, onboarding, invitations, and citizen portal (contains Task 2 components from previous execution)

## Self-Check: PASSED

All files exist, all commits verified, TypeScript compiles without errors in both apps.
