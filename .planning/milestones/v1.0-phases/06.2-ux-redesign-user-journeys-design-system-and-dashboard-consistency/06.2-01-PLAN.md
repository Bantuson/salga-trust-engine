---
phase: 06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - shared/design-tokens.css
  - shared/tokens.ts
  - shared/animations.css
  - shared/components/ui/GlassCard.tsx
  - shared/components/ui/Button.tsx
  - shared/components/ui/Input.tsx
  - shared/components/ui/Skeleton.tsx
  - shared/components/ui/Badge.tsx
  - shared/components/AnimatedGradientBg.tsx
  - shared/components/NdebelePattern.tsx
  - shared/hooks/useReducedMotion.ts
  - shared/lib/utils.ts
  - frontend-dashboard/package.json
  - frontend-public/package.json
autonomous: true

must_haves:
  truths:
    - "Both dashboards use Space Grotesk for headings and Inter for body text"
    - "Glassmorphism card component is reusable across both dashboards with default/elevated/interactive variants"
    - "Animated gradient background rotates through 3 color schemes smoothly"
    - "Ndebele/Zulu geometric patterns render as subtle decorative accents"
    - "prefers-reduced-motion disables all decorative animations"
    - "Skeleton loaders use dark mode theme with shimmer effect"
  artifacts:
    - path: "shared/components/ui/GlassCard.tsx"
      provides: "Reusable glassmorphism card with 3 variants"
      contains: "variant.*default.*elevated.*interactive"
    - path: "shared/components/ui/Button.tsx"
      provides: "Premium button with coral/teal/ghost variants and micro-interactions"
      contains: "variant.*primary.*secondary.*ghost"
    - path: "shared/components/ui/Skeleton.tsx"
      provides: "Dark mode skeleton loader with shimmer"
      contains: "SkeletonTheme"
    - path: "shared/components/AnimatedGradientBg.tsx"
      provides: "3-gradient rotating animated background"
      contains: "gradient-layer"
    - path: "shared/hooks/useReducedMotion.ts"
      provides: "prefers-reduced-motion detection hook"
      contains: "prefers-reduced-motion"
    - path: "shared/lib/utils.ts"
      provides: "cn() utility for class merging"
      contains: "clsx.*tailwind-merge"
  key_links:
    - from: "shared/components/ui/GlassCard.tsx"
      to: "shared/design-tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--glass"
    - from: "shared/components/AnimatedGradientBg.tsx"
      to: "shared/hooks/useReducedMotion.ts"
      via: "animation disable on reduced motion"
      pattern: "useReducedMotion"
---

<objective>
Create the shared design system foundation that both dashboards will use: typography (Space Grotesk + Inter), reusable glassmorphism components, animated gradient background, Ndebele/Zulu geometric patterns, skeleton loaders, accessibility hooks, and utility functions.

Purpose: Establish a single source of truth for all visual components, enabling consistent branding across both the municipal and public dashboards. This is the foundation that all subsequent plans depend on.

Output: Shared component library in shared/, installed dependencies in both apps, ready for consumption.
</objective>

<execution_context>
@C:/Users/Bantu/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Bantu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-RESEARCH.md
@.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-CONTEXT.md
@.planning/phases/06.1-postgres-refactor-to-supabase-and-dashboard-separation/06.1-08-SUMMARY.md
@shared/design-tokens.css
@shared/tokens.ts
@shared/animations.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies, update design tokens, create utility functions</name>
  <files>
    frontend-dashboard/package.json
    frontend-public/package.json
    shared/design-tokens.css
    shared/tokens.ts
    shared/animations.css
    shared/lib/utils.ts
    shared/hooks/useReducedMotion.ts
  </files>
  <action>
    **1. Install shared dependencies in BOTH frontend apps:**
    ```bash
    cd frontend-dashboard && npm install react-loading-skeleton class-variance-authority clsx tailwind-merge
    cd frontend-public && npm install react-loading-skeleton class-variance-authority clsx tailwind-merge
    ```

    **2. Update shared/design-tokens.css:**
    - Add typography variables for Space Grotesk + Inter:
      ```css
      --font-display: 'Space Grotesk', sans-serif;
      --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      ```
      NOTE: Replace existing `--font-display: 'Clash Display'` with `'Space Grotesk'` per research recommendation. Keep Inter as body font.
    - Add typography scale with clamp() for responsive sizing:
      ```css
      --text-h1: clamp(2.5rem, 5vw, 4rem);
      --text-h2: clamp(2rem, 4vw, 3rem);
      --text-h3: clamp(1.5rem, 3vw, 2rem);
      --text-h4: clamp(1.25rem, 2.5vw, 1.5rem);
      --text-base: 1rem;
      --text-lg: 1.125rem;
      --text-sm: 0.875rem;
      --text-xs: 0.75rem;
      --leading-tight: 1.2;
      --leading-normal: 1.5;
      --leading-relaxed: 1.75;
      ```
    - Add gold tertiary accent inspired by Ndebele palette: `--color-gold: #FBBF24;`
    - Add animated gradient CSS variables:
      ```css
      --gradient-1: linear-gradient(135deg, #0A0E1A 0%, #1A1F3A 50%, #0F1523 100%);
      --gradient-2: linear-gradient(225deg, #0A0E1A 0%, #1C1A2E 50%, #131829 100%);
      --gradient-3: linear-gradient(315deg, #0A0E1A 0%, #0F2322 50%, #1A1F3A 100%);
      ```
    - Add Google Fonts import at the TOP of the file (before :root):
      ```css
      @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
      ```

    **3. Update shared/tokens.ts:**
    - Update `typography.displayFont` to `'Space Grotesk'` (was 'Clash Display')
    - Add gold color: `gold: '#FBBF24'`
    - Add gradient color schemes array for programmatic use

    **4. Update shared/animations.css:**
    - Add `@media (prefers-reduced-motion: reduce)` block that disables all decorative animations:
      ```css
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }
      ```
    - Add gradient rotation keyframes for AnimatedGradientBg:
      ```css
      @keyframes gradientFadeInOut {
        0%, 33%, 100% { opacity: 0; }
        16.5% { opacity: 1; }
      }
      ```

    **5. Create shared/lib/utils.ts:**
    ```typescript
    import { clsx, type ClassValue } from 'clsx';
    import { twMerge } from 'tailwind-merge';

    export function cn(...inputs: ClassValue[]) {
      return twMerge(clsx(inputs));
    }
    ```
    NOTE: If Tailwind CSS is NOT yet installed in either app, the cn() function should use just clsx (skip twMerge) since Tailwind classes won't be present. Check package.json first. If no tailwindcss, just export `cn = clsx`.

    **6. Create shared/hooks/useReducedMotion.ts:**
    ```typescript
    import { useState, useEffect } from 'react';

    export function useReducedMotion(): boolean {
      const [reducedMotion, setReducedMotion] = useState(() => {
        if (typeof window === 'undefined') return false;
        return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      });

      useEffect(() => {
        const mql = window.matchMedia('(prefers-reduced-motion: reduce)');
        const handler = (e: MediaQueryListEvent) => setReducedMotion(e.matches);
        mql.addEventListener('change', handler);
        return () => mql.removeEventListener('change', handler);
      }, []);

      return reducedMotion;
    }
    ```
  </action>
  <verify>
    - `ls shared/lib/utils.ts shared/hooks/useReducedMotion.ts` — both exist
    - `grep "Space Grotesk" shared/design-tokens.css` — font updated
    - `grep "react-loading-skeleton" frontend-dashboard/package.json` — dependency installed
    - `grep "react-loading-skeleton" frontend-public/package.json` — dependency installed
    - `grep "prefers-reduced-motion" shared/animations.css` — reduced motion block exists
  </verify>
  <done>
    Design tokens updated with Space Grotesk typography, responsive scale, gold accent, and gradient variables. Utility functions (cn, useReducedMotion) created. Dependencies installed in both apps.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create shared UI components (GlassCard, Button, Input, Skeleton, Badge, AnimatedGradientBg, NdebelePattern)</name>
  <files>
    shared/components/ui/GlassCard.tsx
    shared/components/ui/Button.tsx
    shared/components/ui/Input.tsx
    shared/components/ui/Skeleton.tsx
    shared/components/ui/Badge.tsx
    shared/components/AnimatedGradientBg.tsx
    shared/components/NdebelePattern.tsx
  </files>
  <action>
    **1. Create shared/components/ui/GlassCard.tsx:**
    - Reusable glassmorphism card based on the municipal dashboard login card that the user loves
    - Three variants: `default`, `elevated`, `interactive`
    - Props: `children`, `className?`, `variant?`, `glow?: 'coral' | 'teal' | 'gold' | 'none'`
    - Default variant:
      ```
      background: rgba(26, 31, 58, 0.6)
      backdrop-filter: blur(16px)
      border: 1px solid rgba(255,255,255,0.1)
      border-radius: var(--radius-xl) (24px)
      ```
    - Elevated: stronger blur (20px), brighter border (0.15)
    - Interactive: hover state — border brightens, subtle translateY(-2px), glow effect based on `glow` prop
    - Use CSS custom properties from design-tokens.css
    - Use inline styles (NOT Tailwind) since both apps use plain CSS

    **2. Create shared/components/ui/Button.tsx:**
    - Variants: `primary` (coral bg), `secondary` (teal outline), `ghost` (transparent with hover)
    - Sizes: `sm`, `md`, `lg`
    - States: default, hover (with micro-interaction — slight scale 1.02), focus (ring), disabled (opacity 0.5), loading (spinner)
    - Loading state shows inline spinner
    - Use class-variance-authority (cva) for variant management if possible, otherwise inline styles
    - Coral glow on hover for primary variant
    - Include `React.forwardRef` for form integration

    **3. Create shared/components/ui/Input.tsx:**
    - Dark mode styled input matching design system
    - Background: var(--surface-elevated)
    - Border: var(--border-subtle), focus: var(--color-teal) with teal glow
    - Label + input + error message composition
    - Props: `label?`, `error?`, `icon?`, standard HTMLInputElement props
    - Use `React.forwardRef`

    **4. Create shared/components/ui/Skeleton.tsx:**
    - Wrapper around react-loading-skeleton with dark mode SkeletonTheme
    - Base color: `rgba(255,255,255,0.05)`
    - Highlight color: `rgba(255,255,255,0.1)`
    - Export both `Skeleton` (individual) and `SkeletonTheme` (provider)
    - Import 'react-loading-skeleton/dist/skeleton.css'
    - Convenience components: `SkeletonCard`, `SkeletonTable`, `SkeletonText`

    **5. Create shared/components/ui/Badge.tsx:**
    - Status badges for ticket states: open, in_progress, escalated, resolved, closed
    - Color mapping using design tokens
    - Small pill shape
    - Props: `status: string`, `className?`

    **6. Create shared/components/AnimatedGradientBg.tsx:**
    - Fixed position background that rotates through 3 gradient color schemes
    - Three absolutely positioned layers with staggered opacity animations
    - Gradient 1: Navy -> Deep Blue (135deg)
    - Gradient 2: Navy -> Purple Tint (225deg)
    - Gradient 3: Navy -> Teal Tint (315deg)
    - Animation: Each layer fades in/out on 20s cycle, staggered by 6.67s
    - CSS animation (not JS) for performance
    - MUST check `useReducedMotion()` — if true, show static navy background only
    - Replaces the current GradientMeshBg.tsx on the municipal dashboard login page

    **7. Create shared/components/NdebelePattern.tsx:**
    - SVG-based Ndebele/Zulu geometric pattern component for subtle accents
    - Three pattern variants: `border` (horizontal line), `corner` (card corner ornament), `background` (repeating tile)
    - Use SVG inline (not external files) for zero network requests
    - Simple geometric shapes: triangles, rectangles, chevrons inspired by Ndebele house painting
    - Colors: coral, teal, gold at very low opacity (0.05-0.15) to be subtle
    - Props: `variant`, `className?`, `opacity?: number`
    - The `border` variant renders as a repeating horizontal geometric strip (8px tall)
    - The `corner` variant renders a small ornamental SVG for card top-right corners (80x80px)
    - The `background` variant renders a faint repeating pattern for section backgrounds

    **Build verification after creating all components:**
    Run `cd frontend-dashboard && npx tsc --noEmit` and `cd frontend-public && npx tsc --noEmit` to verify TypeScript compilation of shared components.
  </action>
  <verify>
    - `ls shared/components/ui/GlassCard.tsx shared/components/ui/Button.tsx shared/components/ui/Input.tsx shared/components/ui/Skeleton.tsx shared/components/ui/Badge.tsx` — all exist
    - `ls shared/components/AnimatedGradientBg.tsx shared/components/NdebelePattern.tsx` — both exist
    - `grep "variant" shared/components/ui/GlassCard.tsx` — has variant prop
    - `grep "useReducedMotion" shared/components/AnimatedGradientBg.tsx` — checks reduced motion
    - `cd frontend-dashboard && npx tsc --noEmit` — TypeScript compiles
    - `cd frontend-public && npx tsc --noEmit` — TypeScript compiles
  </verify>
  <done>
    7 shared components created: GlassCard (3 variants), Button (3 variants, loading state), Input (dark mode, error state), Skeleton (dark theme), Badge (5 ticket statuses), AnimatedGradientBg (3-scheme rotation with reduced motion), NdebelePattern (3 SVG variants). Both apps compile with zero TypeScript errors.
  </done>
</task>

</tasks>

<verification>
1. All shared component files exist in shared/components/
2. Design tokens updated with Space Grotesk, typography scale, gold accent, gradient vars
3. Dependencies installed in both frontend apps
4. TypeScript compiles in both apps (npx tsc --noEmit)
5. prefers-reduced-motion support in animations.css and AnimatedGradientBg
6. Glassmorphism card has 3 variants matching the loved login card design
</verification>

<success_criteria>
- Shared design system provides all base components needed by Plans 02-07
- Typography uses Space Grotesk (display) + Inter (body)
- Animated gradient rotates through 3 color schemes, not static navy
- Ndebele patterns are subtle (low opacity), not overwhelming
- prefers-reduced-motion is respected
- Both apps build successfully with new shared components
</success_criteria>

<output>
After completion, create `.planning/phases/06.2-ux-redesign-user-journeys-design-system-and-dashboard-consistency/06.2-01-SUMMARY.md`
</output>
